try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3403adb0-dfb2-4a9e-a2fc-3bb040e5c549",e._sentryDebugIdIdentifier="sentry-dbid-3403adb0-dfb2-4a9e-a2fc-3bb040e5c549")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2091],{486:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,o:()=>l});var a=n(80263),s=n(51500),r=n(40022);let l=e=>{let{searchString:t,onResetFilter:n,className:l}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",l),"data-sentry-component":"NoSearchResults","data-sentry-source-file":"NoSearchResults.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]}),void 0!==n&&(0,a.jsx)(r.$,{type:"default",onClick:()=>n(),children:"Reset filter"})]})},i=l},3434:(e,t,n)=>{"use strict";n.d(t,{A0:()=>o,BF:()=>c,Gg:()=>d,Hj:()=>u,XI:()=>i,nA:()=>p,nd:()=>m,r6:()=>x});var a=n(80263),s=n(53239),r=n(51500),l=n(95083);let i=s.forwardRef((e,t)=>{let{className:n,containerProps:s,...i}=e;return(0,a.jsx)(l.x,{...s,children:(0,a.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",n),...i})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b [&>tr]:bg-200",n),...s})});o.displayName="TableHeader";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",n),...s})});c.displayName="TableBody";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,r.cn)("bg-primary font-medium text-primary-foreground",n),...s})});d.displayName="TableFooter";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,r.cn)("border-b [&>td]:hover:bg-surface-200 data-[state=selected]:bg-muted",n),...s})});u.displayName="TableRow";let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,r.cn)("h-10 px-4 text-left align-middle heading-meta text-foreground-lighter [&:has([role=checkbox])]:pr-0",n),...s})});m.displayName="TableHead";let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,r.cn)("transition-colors p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...s})});p.displayName="TableCell";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-foreground-muted",n),...s})});x.displayName="TableCaption"},5043:(e,t,n)=>{"use strict";n.d(t,{Lh:()=>u,T_:()=>f});var a=n(32144),s=n(80251),r=n(73969),l=n(26616),i=n.n(l),o=n(15629),c=n(48054),d=n(92403);let u="pgmq_public",m=i()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),p=i()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function x(e){let{projectRef:t,connectionString:n,enable:a}=e,{result:s}=await (0,o.E)({projectRef:t,connectionString:n,sql:a?m:p,queryKey:["toggle-queues-exposure"]});return s}let f=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,a.jE)();return(0,s.n)(e=>x(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await l.invalidateQueries(c.m.exposePostgrestStatus(s)),l.invalidateQueries(d.c.schemas(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.oR.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):t(e,n,a)},...n})}},11799:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var a=n(56947),s=n(65172),r=n(5483),l=n(92403);async function i(e,t){let{projectRef:n}=e;if(!n)throw Error("Project ref is required");let{data:a,error:r}=await (0,s.Jt)("/platform/database/{ref}/backups",{params:{path:{ref:n}},signal:t});return r&&(0,s.H4)(r),a}let o=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,r.CG)();return(0,a.I)(l.c.backups(t),e=>{let{signal:n}=e;return i({projectRef:t},n)},{enabled:n&&!o&&void 0!==t,...s})}},12006:(e,t,n)=>{"use strict";n.d(t,{RB:()=>i,ov:()=>o});var a=n(56947),s=n(15629),r=n(48895);let l=()=>"\n    select\n      s.oid as \"id\",\n      w.fdwname as \"name\",\n      s.srvname as \"server_name\",\n      s.srvoptions as \"server_options\",\n      c.proname as \"handler\",\n      (\n        select jsonb_agg(\n          jsonb_build_object(\n            'id', c.oid::bigint,\n            'schema', relnamespace::regnamespace::text,\n            'name', c.relname,\n            'columns', (\n              select jsonb_agg(\n                jsonb_build_object(\n                  'name', a.attname,\n                  'type', pg_catalog.format_type(a.atttypid, a.atttypmod)\n                )\n              )\n              from pg_catalog.pg_attribute a\n              where a.attrelid = c.oid and a.attnum > 0 and not a.attisdropped\n            ),\n            'options', t.ftoptions\n          )\n        )\n        from pg_catalog.pg_class c\n        join pg_catalog.pg_foreign_table t on c.oid = t.ftrelid\n        where c.oid = any (select t.ftrelid from pg_catalog.pg_foreign_table t where t.ftserver = s.oid)\n      ) as \"tables\"\n    from pg_catalog.pg_foreign_server s\n    join pg_catalog.pg_foreign_data_wrapper w on s.srvfdw = w.oid\n    join pg_catalog.pg_proc c on w.fdwhandler = c.oid;\n  ";async function i(e,t){let{projectRef:n,connectionString:a}=e,r=l(),{result:i}=await (0,s.E)({projectRef:n,connectionString:a,sql:r,queryKey:["fdws"]},t);return i}let o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.Y.list(t),e=>{let{signal:a}=e;return i({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t,...l})}},14861:(e,t,n)=>{"use strict";n.d(t,{K:()=>h,T:()=>j});var a=n(80263),s=n(53239),r=n(52647),l=n(51500),i=n(30435),o=n(53434),c=n.n(o),d=n(27344),u=n.n(d),m=n(37361),p=n.n(m);c().extend(u()),c().extend(p());let x=e=>c().unix(Number(e)/1e3/1e3).toISOString(),f=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},h=e=>{let{utcTimestamp:t,format:n}=e,a=f(t)?x(t):t;return c().utc(a).local().format(n)},g=e=>{let{utcTimestamp:t,format:n}=e,a=f(t)?x(t):t;return c().utc(a).format(n)},y=e=>{let{utcTimestamp:t}=e,n=f(t)?x(t):t;return c().utc(n).fromNow()},j=e=>{let{utcTimestamp:t,className:n,displayAs:o="local",format:c="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,u=h({utcTimestamp:t,format:c}),m=g({utcTimestamp:t,format:c}),p=y({utcTimestamp:t}),[x,f]=(0,s.useState)("start"),j=(0,s.useRef)(null),b=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,s.useEffect)(()=>{let e=()=>{if(j.current){let e=j.current.getBoundingClientRect(),t=window.innerHeight;f(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let v=e=>{let{label:t,value:n}=e,[i,o]=(0,s.useState)(!1);return(0,a.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,r.l)(n,()=>{o(!0),setTimeout(()=>{o(!1)},1e3)})},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":i}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,a.jsx)("div",{className:"border-t w-full border-dashed z-10"}),i&&(0,a.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,a.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:n})]})]})};return(0,a.jsxs)(i.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(i.k$,{asChild:!0,ref:j,className:"text-xs ".concat(n," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,a.jsx)("span",{children:"local"===o?h({utcTimestamp:t,format:d}):g({utcTimestamp:t,format:d})})}),(0,a.jsxs)(i.ZI,{align:x,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(v,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(v,{label:b,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(v,{label:"Relative",value:p,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(v,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},19686:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c});var a={};n.r(a),n.d(a,{BRAND:()=>i.qt,DIRTY:()=>r.jm,EMPTY_PATH:()=>r.I3,INVALID:()=>r.uY,NEVER:()=>i.tm,OK:()=>r.OK,ParseStatus:()=>r.MY,Schema:()=>i.Sj,ZodAny:()=>i.Ml,ZodArray:()=>i.n,ZodBigInt:()=>i.Lr,ZodBoolean:()=>i.WF,ZodBranded:()=>i.eN,ZodCatch:()=>i.hw,ZodDate:()=>i.aP,ZodDefault:()=>i.Xi,ZodDiscriminatedUnion:()=>i.jv,ZodEffects:()=>i.k1,ZodEnum:()=>i.Vb,ZodError:()=>o.G,ZodFirstPartyTypeKind:()=>i.kY,ZodFunction:()=>i.CZ,ZodIntersection:()=>i.Jv,ZodIssueCode:()=>o.eq,ZodLazy:()=>i.Ih,ZodLiteral:()=>i.DN,ZodMap:()=>i.Ut,ZodNaN:()=>i.Tq,ZodNativeEnum:()=>i.WM,ZodNever:()=>i.iS,ZodNull:()=>i.PQ,ZodNullable:()=>i.l1,ZodNumber:()=>i.rS,ZodObject:()=>i.bv,ZodOptional:()=>i.Ii,ZodParsedType:()=>l.Zp,ZodPipeline:()=>i._c,ZodPromise:()=>i.$i,ZodReadonly:()=>i.EV,ZodRecord:()=>i.b8,ZodSchema:()=>i.lK,ZodSet:()=>i.Kz,ZodString:()=>i.ND,ZodSymbol:()=>i.K5,ZodTransformer:()=>i.BG,ZodTuple:()=>i.y0,ZodType:()=>i.aR,ZodUndefined:()=>i._Z,ZodUnion:()=>i.fZ,ZodUnknown:()=>i._,ZodVoid:()=>i.a0,addIssueToContext:()=>r.zn,any:()=>i.bz,array:()=>i.YO,bigint:()=>i.o,boolean:()=>i.zM,coerce:()=>i.au,custom:()=>i.Ie,date:()=>i.p6,datetimeRegex:()=>i.fm,defaultErrorMap:()=>s.su,discriminatedUnion:()=>i.gM,effect:()=>i.QZ,enum:()=>i.k5,function:()=>i.fH,getErrorMap:()=>s.$W,getParsedType:()=>l.CR,instanceof:()=>i.Nl,intersection:()=>i.E$,isAborted:()=>r.G4,isAsync:()=>r.xP,isDirty:()=>r.DM,isValid:()=>r.fn,late:()=>i.fn,lazy:()=>i.RZ,literal:()=>i.eu,makeIssue:()=>r.y7,map:()=>i.Tj,nan:()=>i.oi,nativeEnum:()=>i.fc,never:()=>i.Zm,null:()=>i.ch,nullable:()=>i.me,number:()=>i.ai,object:()=>i.Ik,objectUtil:()=>l.o6,oboolean:()=>i.yN,onumber:()=>i.p7,optional:()=>i.lq,ostring:()=>i.Di,pipeline:()=>i.Tk,preprocess:()=>i.vk,promise:()=>i.iv,quotelessJson:()=>o.WI,record:()=>i.g1,set:()=>i.hZ,setErrorMap:()=>s.pJ,strictObject:()=>i.re,string:()=>i.Yj,symbol:()=>i.HR,transformer:()=>i.Gu,tuple:()=>i.PV,undefined:()=>i.Vx,union:()=>i.KC,unknown:()=>i.L5,util:()=>l.ZS,void:()=>i.rI});var s=n(54686),r=n(93298),l=n(14595),i=n(10663),o=n(63324);let c=a},23886:(e,t,n)=>{"use strict";n.d(t,{GQ:()=>r,Il:()=>l});var a=n(97344),s=n.n(a);function r(e){let t=null==e?void 0:e.split(",").map(e=>e.trim());return s()(e)||!t||0===t.length?{value:[]}:{value:t.map(e=>{let t=e.match(/(\w+)\s+([\w\[\]]+)(?:\s+DEFAULT\s+(.*))?/i);if(!t)return console.error("Error while trying to parse function arguments",e),null;{let[,e,n,a]=t,s=a?a.trim():void 0;return["timestamp","time","timetz","timestamptz"].includes(n.toLowerCase())&&s&&(s="'".concat(s,"'")),{name:e,type:n,defaultValue:s}}}).filter(Boolean)}}function l(e){let t=[];if(e)for(var n in e)t.push({name:n,value:e[n]});return{value:t}}},24771:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(80263);n(53239);let s=function(e){let{children:t,target:n="_blank",href:s,className:r,onClick:l,style:i}=e;return(0,a.jsx)("a",{onClick:l,href:s,target:n,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},30075:(e,t,n)=>{var a=n(50117);e.exports=n(94277)(function(e,t,n){a(e,n,t)})},43242:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p});var a=n(80263),s=n(53239),r=n(70800),l=n(51500),i=n(24771);function o(e){let{children:t,className:n,tag:s="div",style:r}=e;return(0,a.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:n=1,children:s,style:r}=e;return(0,a.jsx)("h".concat(n),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},o.Text=function(e){let{className:t,children:n,style:s,type:r,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:p}=e;return o?(0,a.jsx)("code",{style:s,children:n}):i?(0,a.jsx)("mark",{style:s,children:n}):c?(0,a.jsx)("kbd",{style:s,children:n}):m?(0,a.jsx)("strong",{style:s,children:n}):(0,a.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},o.Link=i.A;let c=(0,s.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,a.jsx)(c.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function m(e){let{children:t,className:n,ulClassName:s,style:r,type:l="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:s,children:t})})})}m.Item=function(e){let{children:t,icon:n,active:s,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:m}=e,p=(0,r.A)("menu"),{type:x}=u(),f=[p.item.base];f.push(p.item.variants[x].base),s?f.push(p.item.variants[x].active):f.push(p.item.variants[x].normal);let h=[p.item.content.base];s?h.push(p.item.content.active):h.push(p.item.content.normal);let g=[p.item.icon.base];return s?g.push(p.item.icon.active):g.push(p.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",f),style:m,onClick:o,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,a.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:n}),(0,a.jsx)("span",{className:h.join(" "),children:t})]})},m.Group=function(e){let{children:t,icon:n,title:s}=e,l=(0,r.A)("menu"),{type:i}=u();return(0,a.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,a.jsx)("span",{className:l.group.icon,children:n}),(0,a.jsx)("span",{className:l.group.content,children:s}),t]})},m.Misc=function(e){let{children:t}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(o.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:t})})})};let p=m},45412:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var a=n(80263),s=n(40022);let r=e=>{let{form:t,hasChanges:n,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:c="Save"}=e,d=o||i||!n&&void 0!==n;return(0,a.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,a.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.$,{disabled:d,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,a.jsx)(s.$,{form:t,type:"primary",htmlType:"submit",disabled:d,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:c})]})]})}},46221:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(80263),s=n(24400),r=n(75232),l=n(72035),i=n(90226),o=n(91435),c=n(20438),d=n(97600),u=n(5483),m=n(52361),p=n(31533),x=n(97175);let f=()=>{let{data:e}=(0,u.YA)(),t=(0,s.useRouter)().pathname.split("/")[4],{data:n}=(0,o.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:m}=(0,c.Q)({projectRef:null==e?void 0:e.ref}),p=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),f=(null==m?void 0:m.selected_addons.find(e=>"pitr"===e.type))!==void 0,h=(0,l.p4)(),g=(0,r._P)("enablePgReplicate"),{databaseReplication:y,databaseRoles:j}=(0,d.x)(["database:replication","database:roles"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.l,{page:t,menu:(0,x.k)(e,{pgNetExtensionExists:p,pitrEnabled:f,columnLevelPrivileges:h,enablePgReplicate:g,showPgReplicate:y,showRoles:j}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},h=(0,m.r)(e=>{let{children:t}=e;return(0,a.jsx)(p.A,{product:"Database",productMenu:(0,a.jsx)(f,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},48054:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,t,n)=>["projects",e,"queue-messages",t,n].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,t)=>["projects",e,"queue-metrics",t],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},52634:(e,t,n)=>{"use strict";n.d(t,{AL:()=>c,J5:()=>u,J_:()=>o,N1:()=>i,aw:()=>d,fX:()=>g,mL:()=>m,mN:()=>p,wB:()=>x,wy:()=>h,x0:()=>f});var a=n(86631),s=n.n(a),r=n(14506),l=n.n(r);let i=["int2","int4","int8","float4","float8","numeric","double precision"],o=["json","jsonb"],c=["text","varchar"],d=["timestamp","timestamptz"],u=["date"],m=["time","timetz"],p=s()(d,u,m),x=["uuid","bool","vector","bytea"],f=l()(s()(i,o,c,p,x)),h={varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},g=[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"},{name:"bytea",description:"Variable-length binary string",type:"others"}]},56776:(e,t,n)=>{"use strict";n.d(t,{$O:()=>u,BQ:()=>x,Uu:()=>p});var a=n(74722),s=n.n(a),r=n(53239),l=n(23229),i=n(3914),o=n(5043),c=n(12006),d=n(5483);let u=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",o.Lh],m=()=>{let{data:e}=(0,d.YA)(),t=(0,c.ov)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),n=(0,r.useMemo)(()=>{var e;let n=null==(e=t.data)?void 0:e.filter(e=>(0,i.vN)({handlerName:l.U.ICEBERG,server:{options:[]}},e)),a=null==n?void 0:n.map(e=>(0,i.WV)(e.server_options)).map(e=>e.supabase_target_schema).flatMap(e=>null==e?void 0:e.split(",")).filter(Boolean);return s()(a)},[t.data]);return{...t,data:n}},p=function(){let{excludeSchemas:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useMemo)(()=>e,[JSON.stringify(e)]),n=m(),a=(0,r.useMemo)(()=>{var e;let a=u.map(e=>({name:e,type:"internal"})),r=null==(e=n.data)?void 0:e.map(e=>({name:e,type:"fdw"}));return s()([...a,...r]).filter(e=>!t.includes(e.name))},[n.data,t]);return{...n,data:a}},x=e=>{let{schema:t,excludedSchemas:n=[]}=e,{data:a}=p({excludeSchemas:n}),s=a.find(e=>e.name===t);return s?{isSchemaLocked:!0,reason:s.type}:{isSchemaLocked:!1,reason:void 0}}},58174:(e,t,n)=>{"use strict";n.d(t,{Fg:()=>a,QY:()=>s,mV:()=>r});let a=["anon","service_role","authenticated","authenticator","dashboard_user","supabase_admin","supabase_auth_admin","supabase_functions_admin","supabase_read_only_user","supabase_realtime_admin","supabase_replication_admin","supabase_storage_admin","pgbouncer","pgsodium_keyholder","pgsodium_keyiduser","pgsodium_keymaker","pgtle_admin"],s=["postgres","pgbouncer","supabase_admin","supabase_auth_admin","supabase_storage_admin","dashboard_user","authenticator","pg_database_owner","pg_read_all_data","pg_write_all_data"],r={canLogin:{disabled:!1,description:"User can login",grant_by_dashboard:!0},canCreateRole:{disabled:!1,description:"User can create roles",grant_by_dashboard:!0},canCreateDb:{disabled:!1,description:"User can create databases",grant_by_dashboard:!0},canBypassRls:{disabled:!1,description:"User bypasses every row level security policy",grant_by_dashboard:!0},isSuperuser:{disabled:!0,description:"User is a Superuser",grant_by_dashboard:!1},isReplicationRole:{disabled:!1,description:"User can initiate streaming replication and put the system in and out of backup mode",grant_by_dashboard:!0}}},72192:(e,t,n)=>{"use strict";n.d(t,{tV:()=>d,_X:()=>c});var a=n(47319),s=n(56947),r=n(15629);let l={databaseRoles:e=>["projects",e,"database-roles"]},i=a.A.roles.list();async function o(e,t){let{projectRef:n,connectionString:a}=e,{result:s}=await (0,r.E)({projectRef:n,connectionString:a,sql:i.sql,queryKey:["database-roles"]},t);return s}let c=function(e){let{projectRef:t,connectionString:n}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(l.databaseRoles(t),e=>{let{signal:a}=e;return o({projectRef:t,connectionString:n},a)},{enabled:a&&void 0!==t,...r})};function d(e,t){return e.invalidateQueries(l.databaseRoles(t))}},73047:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(80263),s=n(15601),r=n.n(s),l=n(43242),i=n(2119),o=n(40022);let c=e=>{let{name:t="",isActive:n,isExternal:s,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:p,textClassName:x="",hoverText:f="",label:h}=e,g=(0,a.jsx)(l.Ay.Item,{icon:c,rounded:!0,active:n,onClick:p,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:f||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,a.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==h&&(0,a.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:h})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?s?(0,a.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,a.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},74383:(e,t,n)=>{"use strict";n.d(t,{aE:()=>eA,ZO:()=>e8,iZ:()=>tr,IP:()=>tL,Ey:()=>ei});var a=n(80263),s=n(60045),r=n(53667),l=n.n(r),i=n(14506),o=n.n(i),c=n(75189),d=n(25643),u=n(3689),m=n(53239),p=n(88602),x=n(486),f=n(95359),h=n(72192),g=n(75006),y=n(75019),j=n(5483),b=n(95708),v=n(40022),N=n(30435),w=n(2119),_=n(32981),S=n(87494),C=n(73969),R=n(19686),E=n(45412),A=n(47319),k=n(32144),T=n(80251),q=n(15629);async function I(e){let{projectRef:t,connectionString:n,payload:a}=e,s=A.A.roles.create(a).sql,{result:r}=await (0,q.E)({projectRef:t,connectionString:n,sql:s,queryKey:["roles","create"]});return r}let F=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>I(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await (0,h.tV)(a,r),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to create database role: ".concat(e.message)):t(e,n,a)},...n})};var L=n(24332),z=n(47452),P=n(93210),D=n(13874),M=n(58174);let B=R.Ay.object({name:R.Ay.string().trim().min(1,"You must provide a name").default(""),isSuperuser:R.Ay.boolean().default(!1),canLogin:R.Ay.boolean().default(!1),canCreateRole:R.Ay.boolean().default(!1),canCreateDb:R.Ay.boolean().default(!1),isReplicationRole:R.Ay.boolean().default(!1),canBypassRls:R.Ay.boolean().default(!1)}),V={name:"",isSuperuser:!1,canLogin:!1,canCreateRole:!1,canCreateDb:!1,isReplicationRole:!1,canBypassRls:!1},$=e=>{let{visible:t,onClose:n}=e,s="create-new-role",{data:r}=(0,j.YA)(),l=(0,S.mN)({resolver:(0,_.u)(B)}),{mutate:i,isLoading:o}=F({onSuccess:(e,t)=>{C.oR.success("Successfully created new role: ".concat(t.payload.name)),d()}}),c=async e=>{if(!r)return console.error("Project is required");i({projectRef:r.ref,connectionString:r.connectionString,payload:e})},d=()=>{n(),l.reset(V)};return(0,a.jsx)(L.Ay,{size:"large",visible:t,header:"Create a new role",className:"mr-0 transform transition-all duration-300 ease-in-out",loading:!1,onCancel:d,customFooter:(0,a.jsx)("div",{className:"flex w-full justify-end space-x-3 border-t border-default px-3 py-4",children:(0,a.jsx)(E.I,{form:s,isSubmitting:o,hasChanges:l.formState.isDirty,handleReset:d})}),"data-sentry-element":"SidePanel","data-sentry-component":"CreateRolePanel","data-sentry-source-file":"CreateRolePanel.tsx",children:(0,a.jsx)(z.lV,{...l,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateRolePanel.tsx",children:(0,a.jsxs)("form",{id:s,className:"grid gap-6 w-full px-8 py-8",onSubmit:l.handleSubmit(c),children:[(0,a.jsx)(z.zB,{control:l.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{className:"grid gap-2 md:grid md:grid-cols-12 space-y-0",children:[(0,a.jsx)(z.lR,{className:"flex flex-col space-y-2 col-span-4 text-sm justify-center text-foreground-light",children:"Name"}),(0,a.jsx)(z.MJ,{className:"col-span-8",children:(0,a.jsx)(P.p,{...t,className:"w-full"})}),(0,a.jsx)(z.C5,{className:"col-start-5 col-span-8"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateRolePanel.tsx"}),(0,a.jsxs)("div",{className:"grid gap-2 mt-4 md:grid md:grid-cols-12",children:[(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsx)(z.lR,{className:"flex flex-col space-y-2 col-span-4 text-sm justify-center text-foreground-light","data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateRolePanel.tsx",children:"Role privileges"})}),(0,a.jsxs)("div",{className:"col-span-8 grid gap-4",children:[Object.keys(M.mV).filter(e=>M.mV[e].grant_by_dashboard).map(e=>{let t=M.mV[e];return(0,a.jsx)(z.zB,{control:l.control,name:e,render:e=>{let{field:n}=e;return(0,a.jsxs)(z.eI,{className:"grid gap-2 md:grid md:grid-cols-12 space-y-0",children:[(0,a.jsx)(z.MJ,{className:"col-span-8 flex items-center gap-4",children:(0,a.jsxs)("div",{className:"w-full text-sm",children:[(0,a.jsx)(D.d,{checked:n.value,onCheckedChange:n.onChange}),(0,a.jsx)(z.lR,{children:t.description})]})}),(0,a.jsx)(z.C5,{className:"col-start-5 col-span-8"})]})}},e)}),(0,a.jsx)(L.Ay.Separator,{"data-sentry-element":"SidePanel.Separator","data-sentry-source-file":"CreateRolePanel.tsx"}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("p",{className:"text-sm",children:"These privileges cannot be granted via the Dashboard:"}),Object.keys(M.mV).filter(e=>!M.mV[e].grant_by_dashboard).map(e=>{let t=M.mV[e];return(0,a.jsx)(z.zB,{control:l.control,name:e,render:e=>{let{field:n}=e;return(0,a.jsxs)(z.eI,{className:"space-y-0 opacity-70",children:[(0,a.jsx)(z.MJ,{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"w-full text-sm",children:[(0,a.jsx)(D.d,{checked:n.value,onCheckedChange:n.onChange,disabled:!0,"aria-readonly":!0}),(0,a.jsx)(z.lR,{children:t.description})]})}),(0,a.jsx)(z.C5,{className:"col-start-5 col-span-8"})]})}},e)})]})]})]})]})})})};async function Y(e){let{projectRef:t,connectionString:n,id:a,payload:s}=e,r=A.A.roles.remove({id:a},s).sql,{result:l}=await (0,q.E)({projectRef:t,connectionString:n,sql:r,queryKey:["roles","delete"]});return l}let Z=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>Y(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await (0,h.tV)(a,r),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to delete database role: ".concat(e.message)):t(e,n,a)},...n})};var H=n(67120);let O=e=>{let{role:t,visible:n,onClose:s}=e,{data:r}=(0,j.YA)(),{mutate:l,isLoading:i}=Z({onSuccess:()=>{C.oR.success("Successfully deleted role: ".concat(t.name)),s()}}),o=async()=>r?t?void l({projectRef:r.ref,connectionString:r.connectionString,id:t.id}):console.error("Failed to delete role: role is missing"):console.error("Project is required");return(0,a.jsx)(H.A,{size:"small",alignFooter:"right",visible:n,onCancel:s,onConfirm:o,header:(0,a.jsxs)("h3",{children:['Confirm to delete role "',null==t?void 0:t.name,'"']}),loading:i,"data-sentry-element":"Modal","data-sentry-component":"DeleteRoleModal","data-sentry-source-file":"DeleteRoleModal.tsx",children:(0,a.jsx)(H.A.Content,{"data-sentry-element":"Modal.Content","data-sentry-source-file":"DeleteRoleModal.tsx",children:(0,a.jsx)("p",{className:"text-sm",children:"This will automatically revoke any membership of this role in other roles, and this action cannot be undone."})})})};var U=n(27642),W=n(51500),J=n(60680),K=n(71139),G=n(37394);async function Q(e){let{projectRef:t,connectionString:n,id:a,payload:s}=e,r=A.A.roles.update({id:a},s).sql,{result:l}=await (0,q.E)({projectRef:t,connectionString:n,sql:r,queryKey:["roles","update"]});return l}let X=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>Q(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await (0,h.tV)(a,r),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to update database role: ".concat(e.message)):t(e,n,a)},...n})};var ee=n(11462),et=n(26587),en=n(17089),ea=n(63159);let es=e=>{let{role:t,disabled:n=!1,onSelectDelete:s}=e,{data:r}=(0,j.YA)(),[l,i]=(0,m.useState)(!1),{mutate:o,isLoading:c}=X(),{isSuperuser:d,canLogin:u,canCreateRole:p,canCreateDb:x,isReplicationRole:f,canBypassRls:h}=t,g=async(e,n)=>{let{resetForm:a}=n;if(!r)return console.error("Project is required");let s=Object.fromEntries(Object.entries(e).filter(e=>{let[n,a]=e;return a!==t[n]}));o({projectRef:r.ref,connectionString:r.connectionString,id:t.id,payload:s},{onSuccess:()=>{C.oR.success('Successfully updated role "'.concat(t.name,'"')),a({values:{...e},initialValues:{...e}})}})};return(0,a.jsx)(U.A,{name:"role-update-form",initialValues:{isSuperuser:d,canLogin:u,canCreateRole:p,canCreateDb:x,isReplicationRole:f,canBypassRls:h},onSubmit:g,className:(0,W.cn)("bg-surface-100","hover:bg-overlay-hover","data-open:bg-selection","border-default hover:border-strong","data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border border-t-0 first:border-t first:!mt-0 hover:border-t hover:-mt-[1px] shadow transition hover:z-50","first:rounded-tl first:rounded-tr","last:rounded-bl last:rounded-br"),"data-sentry-element":"Form","data-sentry-component":"RoleRow","data-sentry-source-file":"RoleRow.tsx",children:e=>{let{values:r,initialValues:o,handleReset:d}=e,u=JSON.stringify(r)!==JSON.stringify(o);return(0,a.jsxs)(J.Ay,{open:l,children:[(0,a.jsx)(J.Ay.Trigger,{asChild:!0,children:(0,a.jsxs)("button",{id:"collapsible-trigger",type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-4 md:px-6 text-foreground",onClick:e=>{"collapsible-trigger"===e.target.id&&i(!l)},children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(ee.A,{id:"collapsible-trigger",className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,a.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,a.jsx)("p",{className:"text-left text-sm",id:"collapsible-trigger",children:t.name}),(0,a.jsxs)("p",{className:"text-left text-sm text-foreground-light",id:"collapsible-trigger",children:["(ID: ",t.id,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[t.activeConnections>0&&(0,a.jsx)("div",{className:"relative h-2 w-2",children:(0,a.jsxs)("span",{className:"flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-brand opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-brand opacity-75"})]})}),(0,a.jsxs)("p",{id:"collapsible-trigger",className:"text-sm ".concat(t.activeConnections>0?"text-foreground":"text-foreground-light"),children:[t.activeConnections," connections"]}),!n&&(0,a.jsxs)(K.rI,{children:[(0,a.jsx)(K.ty,{asChild:!0,children:(0,a.jsx)(v.$,{type:"default",className:"px-1",icon:(0,a.jsx)(et.A,{})})}),(0,a.jsx)(K.SQ,{side:"bottom",className:"w-[120px]",children:(0,a.jsxs)(K._2,{className:"space-x-2",onClick:e=>{e.stopPropagation(),s(t)},children:[(0,a.jsx)(en.A,{className:"text-red-800",size:"14",strokeWidth:2}),(0,a.jsx)("p",{children:"Delete"})]})})]})]})]})}),(0,a.jsx)(J.Ay.Content,{children:(0,a.jsxs)("div",{className:"group border-t border-default bg-surface-100 py-6 px-5 md:px-20 text-foreground",children:[(0,a.jsx)("div",{className:"py-4 space-y-[9px]",children:Object.keys(M.mV).map(e=>(0,a.jsx)(G.A,{size:"small",id:e,name:e,label:M.mV[e].description,disabled:n||M.mV[e].disabled,className:["roles-toggle",n||M.mV[e].disabled?"[&>div>button]:opacity-30 [&>div>label]:text-foreground-lighter":""].join(" "),afterLabel:!n&&M.mV[e].disabled&&(0,a.jsxs)(N.m_,{children:[(0,a.jsx)(N.k$,{children:(0,a.jsx)(ea.A,{size:"14",strokeWidth:2,className:"ml-2 relative top-[3px]"})}),(0,a.jsx)(N.ZI,{side:"bottom",children:"This privilege cannot be updated via the dashboard"})]})},e))}),!n&&(0,a.jsxs)("div",{className:"py-4 flex items-center space-x-2 justify-end",children:[(0,a.jsx)(v.$,{type:"default",disabled:!u||c,onClick:()=>d(),children:"Cancel"}),(0,a.jsx)(v.$,{type:"primary",htmlType:"submit",disabled:!u||c,loading:c,children:"Save"})]})]})})]})}})};var er=n(90437);let el=e=>{let{index:t}=e;return(0,a.jsx)("div",{className:(0,W.cn)(["bg-surface-100","data-open:bg-selection","border-default","data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border border-t-0 first:border-t first:!mt-0 shadow transition","first:rounded-tl first:rounded-tr","last:rounded-bl last:rounded-br"]),"data-sentry-component":"RoleRowSkeleton","data-sentry-source-file":"RoleRowSkeleton.tsx",children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between rounded py-3 px-6 text-foreground",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(ee.A,{id:"collapsible-trigger",className:"text-border-stronger rotate-180",strokeWidth:2,width:14,"data-sentry-element":"ChevronUp","data-sentry-source-file":"RoleRowSkeleton.tsx"}),(0,a.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,a.jsx)(er.A,{className:"h-4 w-20 py-0 my-0.5",delayIndex:t,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"RoleRowSkeleton.tsx"}),(0,a.jsx)(er.A,{className:"h-4 w-16 py-0 my-0.5",delayIndex:t,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"RoleRowSkeleton.tsx"})]})]}),(0,a.jsx)(er.A,{className:"h-4 w-[90px] py-0 my-0.5",delayIndex:t,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"RoleRowSkeleton.tsx"})]})})},ei=()=>{let{data:e}=(0,j.YA)(),[t,n]=(0,m.useState)(""),[r,i]=(0,m.useState)("all"),[_,S]=(0,m.useState)(!1),[C,R]=(0,m.useState)(),{can:E}=(0,y.hl)(s.aG.TENANT_SQL_ADMIN_WRITE,"roles"),{data:A}=(0,g.Dt)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),k=null==A?void 0:A.maxConnections,{data:T,isLoading:q}=(0,h._X)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),I=o()(null!=T?T:[],e=>e.name.toLocaleLowerCase()),F=("active"===r?I.filter(e=>e.activeConnections>0):I).filter(e=>e.name.includes(t)),[L,z]=l()(F,e=>M.Fg.includes(e.name)),P=I.map(e=>e.activeConnections).reduce((e,t)=>e+t,0),D=o()(I.filter(e=>e.activeConnections>0),e=>-e.activeConnections);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(b.A,{size:"tiny",className:"w-52",placeholder:"Search for a role",icon:(0,a.jsx)(c.A,{size:12}),value:t,onChange:e=>n(e.target.value),actions:t&&(0,a.jsx)(v.$,{size:"tiny",type:"text",onClick:()=>n(""),className:"px-1 mr-1",children:(0,a.jsx)(d.A,{size:12,strokeWidth:2})}),"data-sentry-element":"Input","data-sentry-source-file":"RolesList.tsx"}),(0,a.jsxs)("div",{className:"flex items-center border border-strong rounded-full w-min h-[26px]",children:[(0,a.jsx)("button",{className:["text-xs w-[80px] h-full text-center rounded-l-full flex items-center justify-center transition","all"===r?"bg-overlay-hover text-foreground":"hover:bg-surface-200 text-foreground-light"].join(" "),onClick:()=>i("all"),children:"All roles"}),(0,a.jsx)("div",{className:"h-full w-[1px] border-r border-strong"}),(0,a.jsx)("button",{className:["text-xs w-[80px] h-full text-center rounded-r-full flex items-center justify-center transition","active"===r?"bg-overlay-hover text-foreground":"hover:bg-surface-200 text-foreground-light"].join(" "),onClick:()=>i("active"),children:"Active roles"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)(N.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"RolesList.tsx",children:[(0,a.jsx)(N.k$,{"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"RolesList.tsx",children:(0,a.jsx)("div",{className:"w-42",children:(0,a.jsx)(f.A,{type:"horizontal",max:k||P,value:P,barClass:0===k||void 0===k?"bg-foreground":P>.9*k?"bg-destructive":P>.75*k?"bg-warning":void 0,labelTop:Number.isInteger(k)?"".concat(P,"/").concat(k):"".concat(P),labelTopClass:"text-xs",labelBottom:"Active connections",labelBottomClass:"text-xs","data-sentry-element":"SparkBar","data-sentry-source-file":"RolesList.tsx"})})}),(0,a.jsxs)(N.ZI,{align:"start",side:"bottom",className:"space-y-1","data-sentry-element":"TooltipContent","data-sentry-source-file":"RolesList.tsx",children:[(0,a.jsx)("p",{className:"text-foreground-light pr-2",children:"Connections by roles:"}),D.map(e=>(0,a.jsxs)("div",{children:[e.name,": ",e.activeConnections]},e.id))]})]}),(0,a.jsx)(p.G,{type:"primary",disabled:!E,icon:(0,a.jsx)(u.A,{size:12}),onClick:()=>S(!0),tooltip:{content:{side:"bottom",text:E?void 0:"You need additional permissions to add a new role"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"RolesList.tsx",children:"Add role"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-surface-100 border border-default px-4 md:px-6 py-3 rounded-t flex items-center space-x-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Roles managed by Supabase"}),(0,a.jsx)(w.E,{variant:"brand","data-sentry-element":"Badge","data-sentry-source-file":"RolesList.tsx",children:"Protected"})]}),q?Array.from({length:5}).map((e,t)=>(0,a.jsx)(el,{index:t},t)):L.map(e=>(0,a.jsx)(es,{disabled:!0,role:e,onSelectDelete:R},e.id))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"bg-surface-100 border border-default px-4 md:px-6 py-3 rounded-t",children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Other database roles"})}),q?Array.from({length:3}).map((e,t)=>(0,a.jsx)(el,{index:t},t)):z.map(e=>(0,a.jsx)(es,{disabled:!E,role:e,onSelectDelete:R},e.id))]})]}),t.length>0&&0===F.length&&(0,a.jsx)(x.A,{searchString:t,onResetFilter:()=>n("")}),(0,a.jsx)($,{visible:_,onClose:()=>S(!1),"data-sentry-element":"CreateRolePanel","data-sentry-source-file":"RolesList.tsx"}),(0,a.jsx)(O,{role:C,visible:void 0!==C,onClose:()=>R(void 0),"data-sentry-element":"DeleteRoleModal","data-sentry-source-file":"RolesList.tsx"})]})};var eo=n(53434),ec=n.n(eo),ed=n(17233),eu=n(24400),em=n(75232),ep=n(43969),ex=n(61957),ef=n(65172);async function eh(e){let{ref:t,backup:n}=e;if(n.isPhysicalBackup){let{data:e,error:a}=await (0,ef.bE)("/platform/database/{ref}/backups/restore-physical",{params:{path:{ref:t}},body:{id:n.id,recovery_time_target:n.inserted_at}});if(a)throw a;return e}let{data:a,error:s}=await (0,ef.bE)("/platform/database/{ref}/backups/restore",{params:{path:{ref:t}},body:{id:n.id}});return s&&(0,ef.H4)(s),a}let eg=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,T.n)(e=>eh(e),{async onSuccess(t,n,a){await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?C.oR.error("Failed to restore from backup: ".concat(e.message)):t(e,n,a)},...n})};var ey=n(11799),ej=n(13929),eb=n(63492),ev=n(50204),eN=n(67201),ew=n(12578),e_=n(32592),eS=n(14861);let eC=e=>{let{index:t,isHealthy:n,backup:r,onSelectBackup:l}=e,{ref:i}=(0,em.g)(),{can:o}=(0,y.hl)(s.aG.INFRA_EXECUTE,"queue_job.restore.prepare"),{mutate:c,isLoading:d}=(0,e_.Z)({onSuccess:e=>{let{fileUrl:t}=e,n=document.createElement("a");n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}});return(0,a.jsxs)("div",{className:"flex h-12 items-center justify-between px-6 ".concat(t?"border-t border-default":""),"data-sentry-component":"BackupItem","data-sentry-source-file":"BackupItem.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(eS.T,{displayAs:"utc",utcTimestamp:r.inserted_at,labelFormat:"DD MMM YYYY HH:mm:ss (ZZ)",className:"text-left !text-sm font-mono tracking-tight","data-sentry-element":"TimestampInfo","data-sentry-source-file":"BackupItem.tsx"}),(0,a.jsxs)(N.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"BackupItem.tsx",children:[(0,a.jsx)(N.k$,{"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"BackupItem.tsx",children:(0,a.jsx)(w.E,{variant:"default","data-sentry-element":"Badge","data-sentry-source-file":"BackupItem.tsx",children:r.isPhysicalBackup?"Physical":"Logical"})}),(0,a.jsxs)(N.ZI,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"BackupItem.tsx",children:["Learn more about backup types"," ",(0,a.jsx)(ew.g,{href:"https://supabase.com/blog/postgresql-physical-logical-backups","data-sentry-element":"InlineLink","data-sentry-source-file":"BackupItem.tsx",children:"here"})]})]})]}),(0,a.jsx)("div",{children:(e=>"COMPLETED"===e.status?(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(p.G,{type:"default",disabled:!n||!o,onClick:l,tooltip:{content:{side:"bottom",text:n?o?void 0:"You need additional permissions to trigger a restore":"Cannot be restored as project is not active"}},children:"Restore"}),(0,a.jsx)(p.G,{type:"default",icon:(0,a.jsx)(eN.A,{}),loading:d,disabled:!o||d||e.isPhysicalBackup,onClick:()=>{if(!i)return console.error("Project ref is required");c({ref:i,backup:e})},tooltip:{content:{side:"bottom",className:e.isPhysicalBackup?"w-64":"",text:e.isPhysicalBackup?(0,a.jsxs)(a.Fragment,{children:["Physical backups cannot be downloaded through the dashboard. You can still download it via pgdump by following our guide"," ",(0,a.jsx)(ew.g,{href:"https://supabase.com/docs/guides/troubleshooting/download-logical-backups",children:"here"}),"."]}):o?void 0:"You need additional permissions to download backups"}},children:"Download"})]}):(0,a.jsx)(w.E,{variant:"warning","data-sentry-element":"Badge","data-sentry-component":"generateSideButtons","data-sentry-source-file":"BackupItem.tsx",children:"Backup In Progress..."}))(r)})]})};var eR=n(79035),eE=n(77423);let eA=()=>{var e,t;let n=(0,eu.useRouter)(),s=(0,k.jE)(),{ref:r}=(0,em.g)(),{data:l}=(0,j.YA)(),i=(null==l?void 0:l.status)===eb.BU.ACTIVE_HEALTHY,[o,c]=(0,m.useState)(),{data:d}=(0,ey.h)({projectRef:r}),{mutate:u,isLoading:p,isSuccess:x}=eg({onSuccess:()=>{r&&setTimeout(()=>{(0,ej.Mi)(s,r,eb.BU.RESTORING),C.oR.success("Restoring database back to ".concat(ec()(null==o?void 0:o.inserted_at).format("DD MMM YYYY HH:mm:ss"))),n.push("/project/".concat(r))},3e3)}}),f=null!=(e=null==d?void 0:d.tierKey)?e:"",h=(null!=(t=null==d?void 0:d.backups)?t:[]).sort((e,t)=>new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()),g=null==d?void 0:d.pitr_enabled;return"FREE"===f?(0,a.jsx)(ex.A,{addon:"pitr",icon:(0,a.jsx)(ed.A,{size:20}),primaryText:"Free Plan does not include project backups.",secondaryText:"Upgrade to the Pro Plan for up to 7 days of scheduled backups.",source:"backups"}):g?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-6",children:0===h.length&&"FREE"!==f?(0,a.jsx)(eR.V,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eE.$,{}),(0,a.jsx)(ep.A,{children:null==h?void 0:h.map((e,t)=>(0,a.jsx)(eC,{backup:e,index:t,isHealthy:i,onSelectBackup:()=>c(e)},e.id))})]})}),(0,a.jsx)(ev.A,{size:"medium",confirmLabel:"Confirm restore",confirmLabelLoading:"Restoring",visible:void 0!==o,title:"Confirm to restore from backup",alert:{base:{variant:"warning"},title:"Your project will be offline while the restore is in progress",description:"It is advised to upgrade at a time when there will be minimal impact for your application."},loading:p||x,onCancel:()=>c(void 0),onConfirm:()=>void 0===r?console.error("Project ref required"):void 0===o?console.error("Backup required"):void u({ref:r,backup:o}),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"BackupsList.tsx",children:(0,a.jsxs)("p",{className:"text-sm",children:["Are you sure you want to restore from"," ",ec()(null==o?void 0:o.inserted_at).format("DD MMM YYYY"),"? This will destroy any new data written since this backup was made."]})})]})};var ek=n(97344),eT=n.n(ek),eq=n(70350),eI=n.n(eq),eF=n(30075),eL=n.n(eF),ez=n(44217),eP=n.n(ez),eD=n(52634),eM=n(79015),eB=n(91435),eV=n(92403);async function e$(e){let{projectRef:t,connectionString:n,payload:a}=e,{sql:s,zod:r}=A.A.functions.create(a),{result:l}=await (0,q.E)({projectRef:t,connectionString:n,sql:s,queryKey:["functions","create"]});return l}let eY=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>e$(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(eV.c.databaseFunctions(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to create database function: ".concat(e.message)):t(e,n,a)},...n})};async function eZ(e){let{projectRef:t,connectionString:n,func:a,payload:s}=e,{sql:r,zod:l}=A.A.functions.update(a,s),{result:i}=await (0,q.E)({projectRef:t,connectionString:n,sql:r,queryKey:["functions","update",a.id.toString()]});return i}let eH=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>eZ(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(eV.c.databaseFunctions(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to update database function: ".concat(e.message)):t(e,n,a)},...n})};var eO=n(56776),eU=n(9919),eW=n(77635),eJ=n(40990),eK=n(38417),eG=n(79467),eQ=n(67258),eX=n(23886);let e0=e=>{let{selectedFunction:t,assistantVisible:n,setAssistantVisible:s}=e;return(0,a.jsx)(eU.Fm,{className:"py-3 flex flex-row justify-between items-center border-b-0","data-sentry-element":"SheetHeader","data-sentry-component":"CreateFunctionHeader","data-sentry-source-file":"CreateFunctionHeader.tsx",children:(0,a.jsxs)("div",{className:"flex flex-row gap-3 items-center max-w-[75%]",children:[(0,a.jsxs)(eU.kN,{className:(0,W.cn)("text-muted hover:text ring-offset-background transition-opacity hover:opacity-100","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:pointer-events-none data-[state=open]:bg-secondary","transition"),"data-sentry-element":"SheetClose","data-sentry-source-file":"CreateFunctionHeader.tsx",children:[(0,a.jsx)(d.A,{className:"h-3 w-3","data-sentry-element":"X","data-sentry-source-file":"CreateFunctionHeader.tsx"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,a.jsx)(eU.qp,{className:"truncate","data-sentry-element":"SheetTitle","data-sentry-source-file":"CreateFunctionHeader.tsx",children:void 0!==t?"Edit '".concat(t,"' function"):"Add a new function"})]})})};var e1=n(58378),e2=n(69724),e4=n(82143);let e5=e=>{let{field:t,language:n,focused:s,setFocused:r}=e;return(0,a.jsxs)("div",{className:(0,W.cn)("rounded-md relative group flex-grow"),"data-sentry-component":"FunctionEditor","data-sentry-source-file":"FunctionEditor.tsx",children:[(0,a.jsx)(z.MJ,{"data-sentry-element":"FormControl_Shadcn_","data-sentry-source-file":"FunctionEditor.tsx",children:void 0!==n&&(0,a.jsx)(e4.A,{id:"database-functions-editor",language:"pgsql",placeholder:"plpgsql"===n?"BEGIN\n\nEND;":void 0,value:t.value,onInputChange:t.onChange})}),(0,a.jsx)("div",{className:(0,W.cn)("absolute top-0 right-2 bg-surface-300 border border-strong rounded h-[28px]","opacity-0 group-hover:opacity-100 group-hover:top-2 transition-all"),children:(0,a.jsxs)(N.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"FunctionEditor.tsx",children:[(0,a.jsx)(N.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"FunctionEditor.tsx",children:(0,a.jsx)(v.$,{type:"text",size:"tiny",className:(0,W.cn)("px-1.5 text-foreground-lighter hover:text-foreground","transition z-50"),onClick:()=>r(!s),icon:s?(0,a.jsx)(e1.A,{}):(0,a.jsx)(e2.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"FunctionEditor.tsx"})}),(0,a.jsx)(N.ZI,{side:"bottom","data-sentry-element":"TooltipContent","data-sentry-source-file":"FunctionEditor.tsx",children:s?"Minimize editor":"Maximize editor"})]})})]})},e3="create-function-sidepanel",e6=R.Ay.object({name:R.Ay.string().trim().min(1),schema:R.Ay.string().trim().min(1),args:R.Ay.array(R.Ay.object({name:R.Ay.string().trim().min(1),type:R.Ay.string().trim()})),behavior:R.Ay.enum(["IMMUTABLE","STABLE","VOLATILE"]),definition:R.Ay.string().trim().min(1),language:R.Ay.string().trim(),return_type:R.Ay.string().trim(),security_definer:R.Ay.boolean(),config_params:R.Ay.array(R.Ay.object({name:R.Ay.string().trim().min(1),value:R.Ay.string().trim().min(1)})).optional()}),e8=e=>{let{func:t,visible:n,setVisible:s}=e,{data:r}=(0,j.YA)(),[l,i]=(0,m.useState)(!1),[o,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),[p,x]=(0,m.useState)(!1),f=!!(null==t?void 0:t.id),h=(0,S.mN)({resolver:(0,_.u)(e6)}),g=h.watch("language"),{mutate:y,isLoading:b}=eY(),{mutate:N,isLoading:w}=eH();function R(){h.formState.isDirty?i(!0):s(!n)}let E=async e=>{if(!r)return console.error("Project is required");let a={...e,args:e.args.map(e=>"".concat(e.name," ").concat(e.type)),config_params:eP()(eL()(e.config_params,"name"),"value")};f?N({func:t,projectRef:r.ref,connectionString:r.connectionString,payload:a},{onSuccess:()=>{C.oR.success("Successfully updated function ".concat(e.name)),s(!n)}}):y({projectRef:r.ref,connectionString:r.connectionString,payload:a},{onSuccess:()=>{C.oR.success("Successfully created function ".concat(e.name)),s(!n)}})};(0,m.useEffect)(()=>{if(n){var e,a,s,r,l,i,o;x(!1),h.reset({name:null!=(e=null==t?void 0:t.name)?e:"",schema:null!=(a=null==t?void 0:t.schema)?a:"public",args:(0,eX.GQ)((null==t?void 0:t.argument_types)||"").value,behavior:null!=(s=null==t?void 0:t.behavior)?s:"VOLATILE",definition:null!=(r=null==t?void 0:t.definition)?r:"",language:null!=(l=null==t?void 0:t.language)?l:"plpgsql",return_type:null!=(i=null==t?void 0:t.return_type)?i:"void",security_definer:null!=(o=null==t?void 0:t.security_definer)&&o,config_params:(0,eX.Il)(null==t?void 0:t.config_params).value})}},[n,t]);let{data:A}=(0,eO.Uu)();return(0,a.jsx)(eU.cj,{open:n,onOpenChange:()=>R(),"data-sentry-element":"Sheet","data-sentry-component":"CreateFunction","data-sentry-source-file":"index.tsx",children:(0,a.jsxs)(eU.h,{showClose:!1,size:d?"lg":"default",className:(0,W.cn)("p-0 flex flex-row gap-0",d?"!min-w-screen lg:!min-w-[1200px]":"!min-w-screen lg:!min-w-[600px]"),"data-sentry-element":"SheetContent","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)("div",{className:(0,W.cn)("flex flex-col grow w-full",d&&"w-[60%]"),children:[(0,a.jsx)(e0,{selectedFunction:null==t?void 0:t.name,assistantVisible:d,setAssistantVisible:u,"data-sentry-element":"CreateFunctionHeader","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eW.w,{"data-sentry-element":"Separator","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(z.lV,{...h,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"index.tsx",children:(0,a.jsxs)("form",{id:e3,className:"flex-grow overflow-auto",onSubmit:h.handleSubmit(E),children:[(0,a.jsx)(eU.Xc,{className:p?"hidden":"","data-sentry-element":"SheetSection","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(z.zB,{control:h.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsx)(eQ.M,{label:"Name of function",description:"Name will also be used for the function name in postgres",layout:"horizontal",children:(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t,placeholder:"Name of function"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"index.tsx"})}),(0,a.jsx)(eW.w,{className:p?"hidden":"","data-sentry-element":"Separator","data-sentry-source-file":"index.tsx"}),(0,a.jsxs)(eU.Xc,{className:p?"hidden":"space-y-4","data-sentry-element":"SheetSection","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(z.zB,{control:h.control,name:"schema",render:e=>{let{field:t}=e;return(0,a.jsx)(eQ.M,{label:"Schema",description:"Tables made in the table editor will be in 'public'",layout:"horizontal",children:(0,a.jsx)(z.MJ,{children:(0,a.jsx)(eM.A,{portal:!1,selectedSchemaName:t.value,excludedSchemas:null==A?void 0:A.map(e=>e.name),size:"small",onSelectSchema:e=>t.onChange(e)})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"index.tsx"}),!f&&(0,a.jsx)(z.zB,{control:h.control,name:"return_type",render:e=>{let{field:t}=e;return(0,a.jsx)(eQ.M,{label:"Return type",layout:"horizontal",children:(0,a.jsxs)(eJ.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(eJ.bq,{className:"col-span-8",children:(0,a.jsx)(eJ.yv,{})}),(0,a.jsx)(eJ.gC,{children:(0,a.jsx)(eK.FK,{className:"h-52",children:["void","record","trigger","integer",...eD.x0].map(e=>(0,a.jsx)(eJ.eb,{value:e,children:e},e))})})]})})}})]}),(0,a.jsx)(eW.w,{className:p?"hidden":"","data-sentry-element":"Separator","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eU.Xc,{className:p?"hidden":"","data-sentry-element":"SheetSection","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(e9,{readonly:f,"data-sentry-element":"FormFieldArgs","data-sentry-source-file":"index.tsx"})}),(0,a.jsx)(eW.w,{className:p?"hidden":"","data-sentry-element":"Separator","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(eU.Xc,{className:"".concat(p?"h-full":""," !px-0"),"data-sentry-element":"SheetSection","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(z.zB,{control:h.control,name:"definition",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{className:"space-y-4 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"px-content",children:[(0,a.jsx)(z.lR,{className:"text-base text-foreground",children:"Definition"}),(0,a.jsxs)(z.Rr,{className:"text-sm text-foreground-light",children:[(0,a.jsxs)("p",{children:["The language below should be written in ",(0,a.jsx)("code",{children:g}),"."]}),!f&&(0,a.jsx)("p",{children:"Change the language in the Advanced Settings below."})]})]}),(0,a.jsx)("div",{className:(0,W.cn)("border border-default flex",p?"flex-grow ":"h-72"),children:(0,a.jsx)(e5,{field:t,language:g,focused:p,setFocused:x})}),(0,a.jsx)(z.C5,{className:"px-content"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"index.tsx"})}),(0,a.jsx)(eW.w,{className:p?"hidden":"","data-sentry-element":"Separator","data-sentry-source-file":"index.tsx"}),f?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eU.Xc,{className:p?"hidden":"",children:(0,a.jsx)("div",{className:"space-y-8 rounded bg-studio py-4 px-6 border border-overlay",children:(0,a.jsx)(G.A,{onChange:()=>c(!o),label:"Show advanced settings",checked:o,labelOptional:"These are settings that might be familiar for Postgres developers"})})}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eU.Xc,{className:p?"hidden":"space-y-2 pt-0",children:[(0,a.jsx)(tt,{}),(0,a.jsx)(z.zB,{control:h.control,name:"behavior",render:e=>{let{field:t}=e;return(0,a.jsx)(eQ.M,{label:"Behavior",layout:"horizontal",children:(0,a.jsxs)(eJ.l6,{defaultValue:t.value,onValueChange:t.onChange,children:[(0,a.jsx)(eJ.bq,{className:"col-span-8",children:(0,a.jsx)(eJ.yv,{})}),(0,a.jsxs)(eJ.gC,{children:[(0,a.jsx)(eJ.eb,{value:"IMMUTABLE",children:"immutable"},"IMMUTABLE"),(0,a.jsx)(eJ.eb,{value:"STABLE",children:"stable"},"STABLE"),(0,a.jsx)(eJ.eb,{value:"VOLATILE",children:"volatile"},"VOLATILE")]})]})})}})]}),(0,a.jsx)(eW.w,{className:p?"hidden":""}),(0,a.jsx)(eU.Xc,{className:p?"hidden":"",children:(0,a.jsx)(e7,{readonly:f})}),(0,a.jsx)(eW.w,{className:p?"hidden":""}),(0,a.jsxs)(eU.Xc,{className:p?"hidden":"",children:[(0,a.jsx)("h5",{className:"text-base text-foreground mb-4",children:"Type of Security"}),(0,a.jsx)(z.zB,{control:h.control,name:"security_definer",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.MJ,{className:"col-span-8",children:(0,a.jsxs)(eG.A.Group,{type:"cards",layout:"vertical",onChange:e=>t.onChange("SECURITY_DEFINER"==e.target.value),value:t.value?"SECURITY_DEFINER":"SECURITY_INVOKER",children:[(0,a.jsx)(eG.A,{id:"SECURITY_INVOKER",label:"SECURITY INVOKER",value:"SECURITY_INVOKER",checked:!t.value,description:(0,a.jsxs)(a.Fragment,{children:["Function is to be executed with the privileges of the user that ",(0,a.jsx)("span",{className:"text-foreground",children:"calls it"}),"."]})}),(0,a.jsx)(eG.A,{id:"SECURITY_DEFINER",label:"SECURITY DEFINER",value:"SECURITY_DEFINER",checked:t.value,description:(0,a.jsxs)(a.Fragment,{children:["Function is to be executed with the privileges of the user that ",(0,a.jsx)("span",{className:"text-foreground",children:"created it"}),"."]})})]})}),(0,a.jsx)(z.C5,{})]})}})]})]})]})]})}),(0,a.jsxs)(eU.XW,{"data-sentry-element":"SheetFooter","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(v.$,{disabled:b||w,type:"default",onClick:R,"data-sentry-element":"Button","data-sentry-source-file":"index.tsx",children:"Cancel"}),(0,a.jsxs)(v.$,{form:e3,htmlType:"submit",disabled:b||w,loading:b||w,"data-sentry-element":"Button","data-sentry-source-file":"index.tsx",children:[f?"Save":"Create"," function"]})]})]}),d?(0,a.jsx)("div",{className:"border-l shadow-[rgba(0,0,0,0.13)_-4px_0px_6px_0px] z-10 w-[50%] bg-studio"}):null,(0,a.jsx)(ev.A,{visible:l,title:"Discard changes",confirmLabel:"Discard",onCancel:()=>i(!1),onConfirm:()=>{i(!1),s(!n)},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"index.tsx",children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"There are unsaved changes. Are you sure you want to close the panel? Your changes will be lost."})})]})})},e9=e=>{let{readonly:t}=e,{fields:n,append:s,remove:r}=(0,S.jz)({name:"args"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h5",{className:"text-base text-foreground",children:"Arguments"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Arguments can be referenced in the function body using either names or numbers."})]}),(0,a.jsxs)("div",{className:"space-y-2 pt-4",children:[t&&eT()(n)&&(0,a.jsx)("span",{className:"text-foreground-lighter",children:"No argument for this function"}),n.map((e,n)=>(0,a.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,a.jsx)(z.zB,{name:"args.".concat(n,".name"),render:e=>{let{field:n}=e;return(0,a.jsxs)(z.eI,{className:"flex-1",children:[(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...n,disabled:t,placeholder:"argument_name"})}),(0,a.jsx)(z.C5,{})]})}}),(0,a.jsx)(z.zB,{name:"args.".concat(n,".type"),render:e=>{let{field:n}=e;return(0,a.jsxs)(z.eI,{className:"flex-1",children:[(0,a.jsx)(z.MJ,{children:t?(0,a.jsx)(P.p,{value:n.value,disabled:!0,readOnly:!0,className:"h-auto"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(eJ.l6,{disabled:t,onValueChange:n.onChange,defaultValue:n.value,children:[(0,a.jsx)(eJ.bq,{className:"h-[38px]",children:(0,a.jsx)(eJ.yv,{})}),(0,a.jsx)(eJ.gC,{children:(0,a.jsx)(eK.FK,{className:"h-52",children:["integer",...eD.x0].map(e=>(0,a.jsx)(eJ.eb,{value:e,children:e},e))})})]})})}),(0,a.jsx)(z.C5,{})]})}}),!t&&(0,a.jsx)(v.$,{type:"danger",icon:(0,a.jsx)(en.A,{size:12}),onClick:()=>r(n),className:"h-[38px] w-[38px]"})]},e.id)),!t&&(0,a.jsx)(v.$,{type:"default",icon:(0,a.jsx)(u.A,{size:12}),onClick:()=>s({name:"",type:"integer"}),disabled:t,children:"Add a new argument"})]})]})},e7=e=>{let{readonly:t}=e,{fields:n,append:s,remove:r}=(0,S.jz)({name:"config_params"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{className:"text-base text-foreground",children:"Configuration Parameters"}),(0,a.jsxs)("div",{className:"space-y-2 pt-4",children:[t&&eT()(n)&&(0,a.jsx)("span",{className:"text-foreground-lighter",children:"No argument for this function"}),n.map((e,n)=>(0,a.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,a.jsx)(z.zB,{name:"config_params.".concat(n,".name"),render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{className:"flex-1",children:[(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t,placeholder:"parameter_name"})}),(0,a.jsx)(z.C5,{})]})}}),(0,a.jsx)(z.zB,{name:"config_params.".concat(n,".value"),render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{className:"flex-1",children:[(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t,placeholder:"parameter_value"})}),(0,a.jsx)(z.C5,{})]})}}),!t&&(0,a.jsx)(v.$,{type:"danger",icon:(0,a.jsx)(en.A,{size:12}),onClick:()=>r(n),className:"h-[38px] w-[38px]"})]},e.id)),!t&&(0,a.jsx)(v.$,{type:"default",icon:(0,a.jsx)(u.A,{size:12}),onClick:()=>s({name:"",type:""}),disabled:t,children:"Add a new config"})]})]})},te=["plpgsql","sql","plcoffee","plv8","plls"],tt=()=>{let{data:e}=(0,j.YA)(),{data:t}=(0,eB.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString},{select:e=>l()(e,e=>!eI()(e.installed_version))[0]}),n=(0,m.useMemo)(()=>te.filter(e=>!e.startsWith("pl")||(null==t?void 0:t.find(t=>t.name===e))!==void 0),[t]);return(0,a.jsx)(z.zB,{name:"language",render:e=>{let{field:t}=e;return(0,a.jsx)(eQ.M,{label:"Language",layout:"horizontal",children:(0,a.jsxs)(eJ.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(eJ.bq,{className:"col-span-8",children:(0,a.jsx)(eJ.yv,{})}),(0,a.jsx)(eJ.gC,{children:n.map(e=>(0,a.jsx)(eJ.eb,{value:e,children:e},e))})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"FormFieldLanguage","data-sentry-source-file":"index.tsx"})};async function tn(e){let{projectRef:t,connectionString:n,func:a}=e,{sql:s,zod:r}=A.A.functions.remove(a),{result:l}=await (0,q.E)({projectRef:t,connectionString:n,sql:s,queryKey:["functions","delete",a.id.toString()]});return l}let ta=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>tn(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(eV.c.databaseFunctions(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to delete database function: ".concat(e.message)):t(e,n,a)},...n})};var ts=n(20168);let tr=e=>{let{func:t,visible:n,setVisible:s}=e,{data:r}=(0,j.YA)(),{name:l,schema:i}=null!=t?t:{},{mutate:o,isLoading:c}=ta({onSuccess:()=>{C.oR.success("Successfully removed function ".concat(l)),s(!1)}});async function d(){return t?r?void o({func:t,projectRef:r.ref,connectionString:r.connectionString}):console.error("Project is required"):console.error("Function is required")}return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ts.A,{variant:"warning",visible:n,onCancel:()=>s(!n),onConfirm:d,title:"Delete this function",loading:c,confirmLabel:"Delete function ".concat(l),confirmPlaceholder:"Type in name of function",confirmString:null!=l?l:"Unknown",text:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"This will delete the function"})," ",(0,a.jsx)("span",{className:"text-bold text-foreground",children:l})," ",(0,a.jsx)("span",{children:"from the schema"})," ",(0,a.jsx)("span",{className:"text-bold text-foreground",children:i})]}),alert:{title:"You cannot recover this function once deleted."},"data-sentry-element":"TextConfirmModal","data-sentry-source-file":"DeleteFunction.tsx"})})};var tl=n(11192),ti=n(20313),to=n(62136),tc=n(87501),td=n(86505),tu=n(82228),tm=n(3434),tp=n(91746),tx=n(87610),tf=n(23445),th=n(15601),tg=n.n(th),ty=n(68889),tj=n(10663),tb=n(6124),tv=n(63846);async function tN(e){let{projectRef:t,connectionString:n,schema:a,name:s,description:r,values:l}=e,i='create type "'.concat(a,'"."').concat(s,'" as enum (').concat(l.map(e=>"'".concat(e,"'")).join(", "),");"),o=void 0!==r?'comment on type "'.concat(a,'"."').concat(s,"\" is '").concat(r,"';"):"",c=(0,tb.d)("".concat(i," ").concat(o)),{result:d}=await (0,q.E)({projectRef:t,connectionString:n,sql:c});return d}let tw=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>tN(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(tv.K.list(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to create enumerated type: ".concat(e.message)):t(e,n,a)},...n})};var t_=n(1012),tS=n(11962);let tC=e=>{let{index:t,id:n,field:s,isDisabled:r=!1,onRemoveValue:l}=e;return(0,a.jsx)(ty.sx,{draggableId:n,index:t,isDragDisabled:r,"data-sentry-element":"Draggable","data-sentry-component":"EnumeratedTypeValueRow","data-sentry-source-file":"EnumeratedTypeValueRow.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,...e.draggableProps,className:"flex items-center space-x-2 space-y-2",children:[(0,a.jsx)("div",{...e.dragHandleProps,className:"opacity-50 hover:opacity-100 transition ".concat(r?"text-foreground-lighter !cursor-default":"text-foreground"),children:(0,a.jsx)(tS.A,{size:16,strokeWidth:1.5})}),(0,a.jsx)(P.p,{...s,className:"w-full"}),(0,a.jsx)(v.$,{type:"default",size:"small",disabled:r,icon:(0,a.jsx)(en.A,{strokeWidth:1.5,size:16}),className:"px-2",onClick:()=>l()})]})})},tR=[...eD.N1,...eD.AL,...eD.J_,...eD.aw,...eD.mL,...eD.J5,...eD.wB,"bigint","bigserial","bit","bit varying","boolean","box","bytea","char","character","character varying","cidr","circle","date","double precision","inet","int","integer","interval","line","lseg","macaddr","macaddr8","money","numeric","decimal","path","pg_lsn","pg_snapshot","point","polygon","real","smallint","smallserial","serial","time with timezone","timestamp with timezone","tsquery","tsvector","txid_snapshot","xml"],tE=e=>{let{visible:t,onClose:n,schema:s}=e,r={name:"",description:"",values:[{value:""}]},l=(0,m.useRef)(null),{data:i}=(0,j.YA)(),{mutate:o,isLoading:c}=tw({onSuccess:(e,t)=>{C.oR.success('Successfully created type "'.concat(t.name,'"')),b()}});(0,m.useEffect)(()=>{p.reset(r)},[t]);let d=tj.Ik({name:tj.Yj().min(1,"Please provide a name for your enumerated type").refine(e=>!tR.includes(e),{message:"Name cannot be a native Postgres data type"}).default(""),description:tj.Yj().default("").optional(),values:tj.Ik({value:tj.Yj().min(1,"Please provide a value")}).array().default([])}),p=(0,S.mN)({resolver:(0,_.u)(d),defaultValues:r}),{fields:x,append:f,remove:h,move:g}=(0,S.jz)({name:"values",control:p.control}),y=e=>{e.destination&&g(e.source.index,e.destination.index)},b=()=>{p.reset(r),n()};return(0,a.jsx)(L.Ay,{loading:c,visible:t,onCancel:b,header:"Create a new enumerated type",confirmText:"Create type",onConfirm:()=>{l.current&&l.current.click()},"data-sentry-element":"SidePanel","data-sentry-component":"CreateEnumeratedTypeSidePanel","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(L.Ay.Content,{className:"py-4","data-sentry-element":"SidePanel.Content","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(z.lV,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsxs)("form",{className:"space-y-4",onSubmit:p.handleSubmit(e=>{var t;return(null==i?void 0:i.ref)===void 0?console.error("Project ref required"):(null==i?void 0:i.connectionString)===void 0?console.error("Project connectionString required"):void o({projectRef:i.ref,connectionString:i.connectionString,schema:s,name:e.name,description:null==(t=e.description)?void 0:t.replaceAll("'","''"),values:e.values.filter(e=>e.value.length>0).map(e=>e.value.trim())})}),children:[(0,a.jsx)(z.zB,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{children:"Name"}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t})}),(0,a.jsx)(z.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(z.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{children:"Description"}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t})}),(0,a.jsx)(z.Rr,{children:"Optional"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(ty.JY,{onDragEnd:e=>y(e),"data-sentry-element":"DragDropContext","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(ty.gL,{droppableId:"enum_type_values_droppable","data-sentry-element":"Droppable","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,children:[x.map((e,t)=>(0,a.jsx)(z.zB,{control:p.control,name:"values.".concat(t,".value"),render:n=>{let{field:s}=n;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{className:(0,W.cn)(0!==t&&"sr-only"),children:"Values"}),0===t&&(0,a.jsxs)(t_.Fc,{children:[(0,a.jsx)(tx.A,{strokeWidth:1.5}),(0,a.jsx)(t_.XL,{children:"After creation, values cannot be deleted or sorted"}),(0,a.jsxs)(t_.TN,{children:[(0,a.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,a.jsx)(v.$,{asChild:!0,type:"default",icon:(0,a.jsx)(tf.A,{strokeWidth:1.5}),className:"mt-2",children:(0,a.jsx)(tg(),{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(tC,{index:t,id:e.id,field:s,isDisabled:x.length<2,onRemoveValue:()=>h(t)})}),(0,a.jsx)(z.C5,{className:"ml-6"})]})}},e.id)),e.placeholder]})})}),(0,a.jsx)(v.$,{type:"default",icon:(0,a.jsx)(u.A,{strokeWidth:1.5}),onClick:()=>f({value:""}),"data-sentry-element":"Button","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:"Add value"}),(0,a.jsx)(v.$,{ref:l,htmlType:"submit",type:"default",className:"hidden","data-sentry-element":"Button","data-sentry-source-file":"CreateEnumeratedTypeSidePanel.tsx",children:"Update"})]})})})})};async function tA(e){let{projectRef:t,connectionString:n,name:a,schema:s}=e,r="drop type if exists ".concat(s,'."').concat(a,'"'),{result:l}=await (0,q.E)({projectRef:t,connectionString:n,sql:r});return l}let tk=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>tA(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(tv.K.list(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to create enumerated type: ".concat(e.message)):t(e,n,a)},...n})},tT=e=>{let{visible:t,selectedEnumeratedType:n,onClose:s}=e,{data:r}=(0,j.YA)(),{mutate:l,isLoading:i}=tk({onSuccess:()=>{C.oR.success('Successfully deleted "'.concat(n.name,'"')),s()}}),o=()=>void 0===n?console.error("No enumerated type selected"):(null==r?void 0:r.ref)===void 0?console.error("Project ref required"):(null==r?void 0:r.connectionString)===void 0?console.error("Project connectionString required"):void l({projectRef:null==r?void 0:r.ref,connectionString:null==r?void 0:r.connectionString,name:n.name,schema:n.schema});return(0,a.jsxs)(ev.A,{variant:"destructive",size:"medium",loading:i,visible:t,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete enumerated type"," ",(0,a.jsx)("code",{className:"text-sm",children:null==n?void 0:n.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onCancel:s,onConfirm:()=>o(),alert:{title:"This action cannot be undone",description:"You will need to re-create the enumerated type if you want to revert the deletion."},"data-sentry-element":"ConfirmationModal","data-sentry-component":"DeleteEnumeratedTypeModal","data-sentry-source-file":"DeleteEnumeratedTypeModal.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"Before deleting this enumerated type, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:(0,a.jsx)("li",{className:"list-disc ml-6",children:"This enumerated type is no longer in use in any tables or functions"})})]})};async function tq(e){let{projectRef:t,connectionString:n,schema:a,name:s,description:r,values:l=[]}=e,i=[];s.original!==s.updated&&i.push('alter type "'.concat(a,'"."').concat(s.original,'" rename to "').concat(s.updated,'";')),l.length>0&&l.forEach((e,t)=>{if(e.isNew)if(0===t){let t=l.find(e=>!e.isNew);i.push('alter type "'.concat(a,'"."').concat(s.updated,"\" add value '").concat(e.updated,"' before '").concat(null==t?void 0:t.original,"';"))}else i.push('alter type "'.concat(a,'"."').concat(s.updated,"\" add value '").concat(e.updated,"' after '").concat(l[t-1].updated,"';"));else e.original!==e.updated&&i.push('alter type "'.concat(a,'"."').concat(s.updated,"\" rename value '").concat(e.original,"' to '").concat(e.updated,"';"))}),void 0!==r&&i.push('comment on type "'.concat(a,'"."').concat(s.updated,"\" is '").concat(r,"';"));let o=(0,tb.d)(i.join(" ")),{result:c}=await (0,q.E)({projectRef:t,connectionString:n,sql:o});return c}let tI=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,k.jE)();return(0,T.n)(e=>tq(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await a.invalidateQueries(tv.K.list(r)),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?C.oR.error("Failed to add value to enumerated type: ".concat(e.message)):t(e,n,a)},...n})},tF=e=>{var t;let{visible:n,selectedEnumeratedType:s,onClose:r}=e,l=(0,m.useRef)(null),{data:i}=(0,j.YA)(),{mutate:o,isLoading:c}=tI({onSuccess:(e,t)=>{C.oR.success('Successfully updated type "'.concat(t.name.updated,'"')),r()}}),d=tj.Ik({name:tj.Yj().min(1,"Please provide a name for your enumerated type").default(""),description:tj.Yj().default("").optional(),values:tj.Ik({isNew:tj.zM(),originalValue:tj.Yj(),updatedValue:tj.Yj().min(1,"Please provide a value")}).array().default([])}),p=(0,S.mN)({resolver:(0,_.u)(d),defaultValues:{name:"",description:"",values:[{isNew:!0,originalValue:"",updatedValue:""}]}}),{fields:x,append:f,remove:h,move:g}=(0,S.jz)({name:"values",control:p.control}),y=e=>{e.destination&&g(e.source.index,e.destination.index)},b=(null!=(t=null==s?void 0:s.enums)?t:[]).map(e=>({isNew:!1,originalValue:e,updatedValue:e}));return(0,m.useEffect)(()=>{if(void 0!==s){var e;p.reset({name:s.name,description:null!=(e=s.comment)?e:"",values:b})}void 0==s&&p.reset({values:b})},[s]),(0,a.jsx)(L.Ay,{loading:c,visible:n,onCancel:r,header:'Update type "'.concat(null==s?void 0:s.name,'"'),confirmText:"Update type",onConfirm:()=>{l.current&&l.current.click()},"data-sentry-element":"SidePanel","data-sentry-component":"EditEnumeratedTypeSidePanel","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(L.Ay.Content,{className:"py-4","data-sentry-element":"SidePanel.Content","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(z.lV,{...p,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsxs)("form",{className:"space-y-4",onSubmit:p.handleSubmit(e=>{var t;if((null==i?void 0:i.ref)===void 0)return console.error("Project ref required");if((null==i?void 0:i.connectionString)===void 0)return console.error("Project connectionString required");if(void 0===s)return console.error("selectedEnumeratedType required");let n={schema:s.schema,name:{original:s.name,updated:e.name},values:e.values.filter(e=>0!==e.updatedValue.length).map(e=>({original:e.originalValue,updated:e.updatedValue.trim(),isNew:e.isNew})),...e.description!==s.comment?{description:null==(t=e.description)?void 0:t.replaceAll("'","''")}:{}};o({projectRef:i.ref,connectionString:i.connectionString,...n})}),children:[(0,a.jsx)(z.zB,{control:p.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{children:"Name"}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t})}),(0,a.jsx)(z.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(z.zB,{control:p.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{children:"Description"}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(P.p,{...t})}),(0,a.jsx)(z.Rr,{children:"Optional"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx"}),(0,a.jsx)(ty.JY,{onDragEnd:e=>y(e),"data-sentry-element":"DragDropContext","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:(0,a.jsx)(ty.gL,{droppableId:"enum_type_values_droppable","data-sentry-element":"Droppable","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:e=>(0,a.jsxs)("div",{ref:e.innerRef,children:[x.map((e,t)=>(0,a.jsx)(z.zB,{control:p.control,name:"values.".concat(t,".updatedValue"),render:n=>{let{field:s}=n;return(0,a.jsxs)(z.eI,{children:[(0,a.jsx)(z.lR,{className:(0,W.cn)(0!==t&&"sr-only"),children:"Values"}),0===t&&(0,a.jsxs)(t_.Fc,{children:[(0,a.jsx)(tx.A,{strokeWidth:1.5}),(0,a.jsx)(t_.XL,{children:"Existing values cannot be deleted or sorted"}),(0,a.jsxs)(t_.TN,{children:[(0,a.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,a.jsx)(v.$,{asChild:!0,type:"default",icon:(0,a.jsx)(tf.A,{strokeWidth:1.5}),className:"mt-2",children:(0,a.jsx)(tg(),{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,a.jsx)(z.MJ,{children:(0,a.jsx)(tC,{index:t,id:e.id,field:s,isDisabled:!e.isNew,onRemoveValue:()=>h(t)})}),(0,a.jsx)(z.C5,{className:"ml-6"})]})}},e.id)),e.placeholder]})})}),(0,a.jsx)(v.$,{type:"default",icon:(0,a.jsx)(u.A,{strokeWidth:1.5}),onClick:()=>f({isNew:!0,originalValue:"",updatedValue:""}),"data-sentry-element":"Button","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:"Add value"}),(0,a.jsx)(v.$,{ref:l,htmlType:"submit",type:"default",className:"hidden","data-sentry-element":"Button","data-sentry-source-file":"EditEnumeratedTypeSidePanel.tsx",children:"Update"})]})})})})},tL=()=>{let{data:e}=(0,j.YA)(),[t,n]=(0,m.useState)(""),{selectedSchema:s,setSelectedSchema:r}=(0,td.k)(),[l,i]=(0,m.useState)(!1),[o,d]=(0,m.useState)(),[u,p]=(0,m.useState)(),{data:x,error:f,isLoading:h,isError:g,isSuccess:y}=(0,tc.p)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),N=(null!=x?x:[]).filter(e=>e.enums.length>0),w=t.length>0?N.filter(e=>e.schema===s&&e.name.toLowerCase().includes(t.toLowerCase())):N.filter(e=>e.schema===s),{isSchemaLocked:_}=(0,eO.BQ)({schema:s});return(0,a.jsxs)("div",{className:"space-y-4","data-sentry-component":"EnumeratedTypes","data-sentry-source-file":"EnumeratedTypes.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[(0,a.jsx)(eM.A,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:s,onSelectSchema:r,"data-sentry-element":"SchemaSelector","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(b.A,{size:"tiny",value:t,className:"w-full lg:w-52",onChange:e=>n(e.target.value),placeholder:"Search for a type",icon:(0,a.jsx)(c.A,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"EnumeratedTypes.tsx"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(to.A,{href:"https://www.postgresql.org/docs/current/datatype-enum.html","data-sentry-element":"DocsButton","data-sentry-source-file":"EnumeratedTypes.tsx"}),!_&&(0,a.jsx)(v.$,{className:"ml-auto flex-1",type:"primary",onClick:()=>i(!0),children:"Create type"})]})]}),_&&(0,a.jsx)(tp.i,{schema:s,entity:"enumerated types"}),h&&(0,a.jsx)(er.y,{}),g&&(0,a.jsx)(ti.A,{error:f,subject:"Failed to retrieve database enumerated types"}),y&&(0,a.jsx)(tu.Zp,{children:(0,a.jsxs)(tm.XI,{children:[(0,a.jsx)(tm.A0,{children:(0,a.jsxs)(tm.Hj,{children:[(0,a.jsx)(tm.nd,{children:"Schema"},"schema"),(0,a.jsx)(tm.nd,{children:"Name"},"name"),(0,a.jsx)(tm.nd,{children:"Values"},"values"),(0,a.jsx)(tm.nd,{},"actions")]})}),(0,a.jsx)(tm.BF,{children:(0,a.jsxs)(a.Fragment,{children:[0===w.length&&0===t.length&&(0,a.jsx)(tm.Hj,{children:(0,a.jsxs)(tm.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No enumerated types created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no enumerated types found in the schema "',s,'"']})]})}),0===w.length&&t.length>0&&(0,a.jsx)(tm.Hj,{children:(0,a.jsxs)(tm.nA,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]})}),w.length>0&&w.map(e=>(0,a.jsxs)(tm.Hj,{children:[(0,a.jsx)(tm.nA,{className:"w-20",children:(0,a.jsx)("p",{className:"w-20 truncate",children:e.schema})}),(0,a.jsx)(tm.nA,{children:e.name}),(0,a.jsx)(tm.nA,{children:e.enums.join(", ")}),(0,a.jsx)(tm.nA,{children:!_&&(0,a.jsx)("div",{className:"flex justify-end items-center space-x-2",children:(0,a.jsxs)(K.rI,{children:[(0,a.jsx)(K.ty,{asChild:!0,children:(0,a.jsx)(v.$,{type:"default",className:"px-1",icon:(0,a.jsx)(et.A,{})})}),(0,a.jsxs)(K.SQ,{side:"bottom",align:"end",className:"w-32",children:[(0,a.jsxs)(K._2,{className:"space-x-2",onClick:()=>d(e),children:[(0,a.jsx)(tl.A,{size:14}),(0,a.jsx)("p",{children:"Update type"})]}),(0,a.jsxs)(K._2,{className:"space-x-2",onClick:()=>p(e),children:[(0,a.jsx)(en.A,{size:14}),(0,a.jsx)("p",{children:"Delete type"})]})]})]})})})]},e.id))]})})]})}),(0,a.jsx)(tE,{visible:l,onClose:()=>i(!1),schema:s,"data-sentry-element":"CreateEnumeratedTypeSidePanel","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(tF,{visible:void 0!==o,selectedEnumeratedType:o,onClose:()=>d(void 0),"data-sentry-element":"EditEnumeratedTypeSidePanel","data-sentry-source-file":"EnumeratedTypes.tsx"}),(0,a.jsx)(tT,{visible:void 0!==u,selectedEnumeratedType:u,onClose:()=>p(void 0),"data-sentry-element":"DeleteEnumeratedTypeModal","data-sentry-source-file":"EnumeratedTypes.tsx"})]})}},75006:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>o});var a=n(56947),s=n(15629),r=n(92403);let l=()=>"show max_connections";async function i(e,t){let{projectRef:n,connectionString:a}=e,r=l(),{result:i}=await (0,s.E)({projectRef:n,connectionString:a,sql:r,queryKey:["max-connections"]},t);return{maxConnections:parseInt(i[0].max_connections)}}let o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.c.maxConnections(t),e=>{let{signal:a}=e;return i({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t,...l})}},77423:(e,t,n)=>{"use strict";n.d(t,{$:()=>l});var a=n(80263),s=n(1012),r=n(86254);let l=()=>(0,a.jsxs)(s.Fc,{variant:"default","data-sentry-element":"Alert_Shadcn_","data-sentry-component":"BackupsStorageAlert","data-sentry-source-file":"BackupsStorageAlert.tsx",children:[(0,a.jsx)(r.id,{"data-sentry-element":"WarningIcon","data-sentry-source-file":"BackupsStorageAlert.tsx"}),(0,a.jsx)(s.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"BackupsStorageAlert.tsx",children:"Database backups do not include objects stored via the Storage API, as the database only includes metadata about these objects. Restoring an old backup does not restore objects that have been deleted since then."})]})},79015:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var a=n(80263),s=n(60045),r=n(96572),l=n(80903),i=n(3689),o=n(53239),c=n(63604),d=n(75019),u=n(5483),m=n(40022),p=n(53555),x=n(1012),f=n(9681),h=n(61965),g=n(38417);let y=e=>{let{className:t,disabled:n=!1,size:y="tiny",showError:j=!0,selectedSchemaName:b,supportSelectAll:v=!1,excludedSchemas:N=[],onSelectSchema:w,onSelectCreateSchema:_,portal:S=!0,align:C="start"}=e,[R,E]=(0,o.useState)(!1),{can:A}=(0,d.hl)(s.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:k}=(0,u.YA)(),{data:T,isLoading:q,isSuccess:I,isError:F,error:L,refetch:z}=(0,c.w$)({projectRef:null==k?void 0:k.ref,connectionString:null==k?void 0:k.connectionString}),P=(T||[]).filter(e=>!N.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,a.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[q&&(0,a.jsx)(m.$,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,a.jsx)(p.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&F&&(0,a.jsxs)(x.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(x.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(x.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==L?void 0:L.message]}),(0,a.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>z(),children:"Reload schemas"})]}),I&&(0,a.jsxs)(f.AM,{open:R,onOpenChange:E,modal:!1,children:[(0,a.jsx)(f.Wv,{asChild:!0,children:(0,a.jsx)(m.$,{size:y,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(r.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:b?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===b?"All schemas":b})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema"})})})}),(0,a.jsx)(f.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:C,portal:S,sameWidthAsTrigger:!0,children:(0,a.jsxs)(h.uB,{children:[(0,a.jsx)(h.G7,{placeholder:"Find schema..."}),(0,a.jsxs)(h.oI,{children:[(0,a.jsx)(h.xL,{children:"No schemas found"}),(0,a.jsx)(h.L$,{children:(0,a.jsxs)(g.FK,{className:(P||[]).length>7?"h-[210px]":"",children:[v&&(0,a.jsxs)(h.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),E(!1)},onClick:()=>{w("*"),E(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===b&&(0,a.jsx)(l.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==P?void 0:P.map(e=>(0,a.jsxs)(h.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),E(!1)},onClick:()=>{w(e.name),E(!1)},children:[(0,a.jsx)("span",{children:e.name}),b===e.name&&(0,a.jsx)(l.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==_&&A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.fx,{}),(0,a.jsx)(h.L$,{children:(0,a.jsxs)(h.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{_(),E(!1)},onClick:()=>{_(),E(!1)},children:[(0,a.jsx)(i.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},79035:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var a=n(80263),s=n(54753);let r=()=>(0,a.jsx)("div",{className:"block w-full rounded border border-muted border-opacity-50 bg-gray-300 p-3","data-sentry-component":"BackupsEmpty","data-sentry-source-file":"BackupsEmpty.tsx",children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(s.A,{size:20,strokeWidth:1.5,"data-sentry-element":"Info","data-sentry-source-file":"BackupsEmpty.tsx"}),(0,a.jsx)("p",{className:"text-sm",children:"No backups created yet - check again tomorrow."})]})})},79467:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(80263),s=n(53239),r=n(1848),l=n(70800),i=n(60115);let o=(0,s.createContext)({parentCallback:e=>{},type:"",name:"",activeId:"",parentSize:""});function c(e){var t;let{id:n=(t=46656*Math.random()|0,("00000"+(46656*Math.random()|0).toString(36)).slice(-3)+("00000"+t.toString(36)).slice(-3)),disabled:s,value:r,label:c,afterLabel:d,beforeLabel:u,description:m,name:p,checked:x,className:f,onChange:h,onBlur:g,hidden:y=!1,size:j="medium",align:b="vertical",optionalLabel:v,addOnBefore:N,children:w}=e,_=(0,l.A)("radio"),{handleBlur:S}=(0,i.x)();function C(e){S&&S(e),g&&g(e)}return(0,a.jsx)(o.Consumer,{"data-sentry-element":"RadioContext.Consumer","data-sentry-component":"Radio","data-sentry-source-file":"Radio.tsx",children:e=>{let{parentCallback:t,type:l,name:i,activeId:o,parentSize:g}=e;j=g||j;let S=o===n||!!x||!1!==x&&void 0,R=[f,_.variants[l].container.base,"list"===l&&!y&&_.variants[l].container.size[j]];return R.push(_.variants[l].base),R.push(_.variants[l].size[j]),S?R.push(_.variants[l].active):R.push(_.variants[l].inactive),s&&R.push(_.disabled),"list"!==l&&(y=!0),(0,a.jsxs)("label",{htmlFor:n,className:R.join(" "),children:[(0,a.jsx)("input",{id:n,name:i||p,type:"radio",className:[_.base,_.size[j],y&&_.hidden,_.variants[l].radio_offset,""].join(" "),checked:S,disabled:s,value:r||n,onChange:e=>{t&&t(e),h&&h(e)},onBlur:C}),N,w||(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:[_.label.base,_.label[j],_.variants[l].container.align[b]].join(" "),children:[u&&(0,a.jsx)("div",{className:[_.label_before.base,_.label_before[j]].join(" "),children:u}),(0,a.jsx)("div",{children:c}),d&&(0,a.jsx)("div",{className:[_.label_after.base,_.label_after[j]].join(" "),children:d}),m&&(0,a.jsx)("div",{className:[_.description.base,_.description[j]].join(" "),children:m})]}),v&&(0,a.jsx)("div",{className:[_.optionalLabel.base,_.optionalLabel[j]].join(" "),children:v})]})]})}})}c.Group=function(e){let{id:t,layout:n,error:d,descriptionText:u,label:m,afterLabel:p,beforeLabel:x,labelOptional:f,children:h,className:g,type:y="list",options:j,value:b,name:v,onChange:N,size:w="medium",validation:_,groupClassName:S,labelsLayout:C="vertical"}=e,[R,E]=(0,s.useState)(""),A=(0,l.A)("radio"),{formContextOnChange:k,values:T,errors:q,touched:I,fieldLevelValidation:F}=(0,i.x)();return T&&!b&&(b=T[t||v]),d||(q&&!d&&(d=q[t||v]),d=I&&I[t||v]?d:void 0),(0,s.useEffect)(()=>{_&&F(t,_(b))},[]),(0,s.useEffect)(()=>{E(b)},[b]),(0,a.jsx)("fieldset",{name:v,className:g,"data-sentry-component":"RadioGroup","data-sentry-source-file":"Radio.tsx",children:(0,a.jsx)(r.H,{nonBoxInput:!0,label:m,afterLabel:p,beforeLabel:x,labelOptional:f,layout:n,id:t,error:d,descriptionText:u,size:w,labelLayout:C,"data-sentry-element":"FormLayout","data-sentry-source-file":"Radio.tsx",children:(0,a.jsx)("div",{className:S||A.variants[y].group,children:(0,a.jsx)(o.Provider,{value:{parentCallback:function(e){N&&N(e),k&&k(e),_&&F(t,_(e.target.value)),E(e.target.id)},type:y,name:v,activeId:R,parentSize:w},"data-sentry-element":"RadioContext.Provider","data-sentry-source-file":"Radio.tsx",children:j?j.map(e=>(0,a.jsx)(c,{id:e.id,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,value:e.value,description:e.description})):h})})})})};let d=c},82228:(e,t,n)=>{"use strict";n.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var a=n(80263),s=n(53239),r=n(51500);let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("overflow-hidden rounded-lg border bg-surface-100 text-card-foreground shadow-sm",n),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",n),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-xs font-mono uppercase",n),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-foreground-muted",n),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("py-4 px-6 border-b last:border-none",n),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)(" flex items-center py-4 px-6",n),...s})});u.displayName="CardFooter"},86505:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var a=n(32466),s=n(53239),r=n(75232);let l=e=>(0,a.ZA)("schema",a.tU.withDefault(e).withOptions({clearOnDefault:!1})),i=()=>{let{ref:e}=(0,r.g)(),t=e&&e.length>0&&window.localStorage.getItem(r.rS.LAST_SELECTED_SCHEMA(e))||"public",[n,a]=l((0,s.useMemo)(()=>t,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(r.rS.LAST_SELECTED_SCHEMA(e),n)},[n,e]),{selectedSchema:n,setSelectedSchema:a}}},87501:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var a=n(56947),s=n(65172),r=n(63846),l=n(89811);async function i(e,t){let{projectRef:n,connectionString:a}=e;if(!n)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:i,error:o}=await (0,s.Jt)("/platform/pg-meta/{ref}/types",{params:{header:{"x-connection-encrypted":a,"x-pg-application-name":l.r},path:{ref:n}},headers:Object.fromEntries(r),signal:t});return o&&(0,s.H4)(o),i}let o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.K.list(t),e=>{let{signal:a}=e;return i({projectRef:t,connectionString:n},a)},{enabled:s&&void 0!==t,...l})}},90226:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var a=n(80263),s=n(43242),r=n(2119),l=n(73047);let i=e=>{let{page:t,menu:n}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(s.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:n.map((e,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.Ay.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,a.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==n.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},91435:(e,t,n)=>{"use strict";n.d(t,{z:()=>d});var a=n(89811),s=n(56947),r=n(65172),l=n(5483),i=n(63492),o=n(28140);async function c(e,t,n){let{projectRef:s,connectionString:l}=e;if(!s)throw Error("projectRef is required");let i=new Headers(n);l&&i.set("x-connection-encrypted",l);let{data:o,error:c}=await (0,r.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":l,"x-pg-application-name":a.r},path:{ref:s}},headers:i,signal:t});return c&&(0,r.H4)(c),o}let d=function(e){let{projectRef:t,connectionString:n}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:d}=(0,l.YA)(),u=(null==d?void 0:d.status)===i.BU.ACTIVE_HEALTHY;return(0,s.I)(o.I.list(t),e=>{let{signal:a}=e;return c({projectRef:t,connectionString:n},a)},{enabled:a&&void 0!==t&&u,...r})}},91746:(e,t,n)=>{"use strict";n.d(t,{i:()=>u});var a=n(80263),s=n(53239),r=n(16838),l=n(40022),i=n(51500),o=n(56776),c=n(47142);let d=e=>{let{onClose:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)(r.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Schemas managed by Supabase"})}),(0,a.jsx)(r.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(r.OO,{className:"space-y-2 prose","data-sentry-element":"DialogSection","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:o.$O.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,a.jsx)(r.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(l.$,{type:"default",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Understood"})})})]})},u=e=>{let{size:t="md",schema:n,entity:u}=e,[m,p]=(0,s.useState)(!1),{isSchemaLocked:x,reason:f}=(0,o.BQ)({schema:n});return x?(0,a.jsx)(c.Z,{showIcon:!1,type:"note",title:"sm"===t?"Viewing protected schema":"Viewing ".concat(u," from a protected schema"),className:(0,i.cn)("[&>div>p]:prose [&>div>p]:max-w-full [&>div>p]:!leading-normal","sm"===t?"[&>div>p]:text-xs":"[&>div>p]:text-sm"),"data-sentry-element":"Admonition","data-sentry-component":"ProtectedSchemaWarning","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"fdw"===f?(0,a.jsxs)("p",{children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsxs)(r.lG,{open:m,onOpenChange:p,children:[(0,a.jsx)(r.zM,{asChild:!0,children:(0,a.jsx)(l.$,{type:"default",size:"tiny",onClick:()=>p(!0),children:"Learn more"})}),(0,a.jsx)(r.Cf,{children:(0,a.jsx)(d,{onClose:()=>p(!1)})})]})]})}):null}},92512:(e,t,n)=>{"use strict";n.d(t,{M:()=>l});var a=n(80263),s=n(51500),r=n(62136);let l=e=>{let{title:t,description:n,docsUrl:l,actions:i,className:o}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,a.jsx)("div",{className:"prose text-sm max-w-2xl",children:n})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,a.jsx)(r.A,{href:l}),i]})]})}},92882:(e,t,n)=>{"use strict";n.d(t,{BS:()=>i,Dm:()=>d,HJ:()=>j,Rf:()=>g,Uw:()=>c,Vw:()=>N,Xr:()=>v,aw:()=>f,bV:()=>l,cJ:()=>p,dX:()=>u,eh:()=>o,fh:()=>b,gu:()=>m,sZ:()=>x,tn:()=>y,xp:()=>h});var a=n(80263),s=n(53239),r=n(51500);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-10",o=(0,s.forwardRef)((e,t)=>{let{className:n,bottomPadding:s,size:l="default",...o}=e;return(0,a.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",n)})}),c=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("header",{...s,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",n)})}),d=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h1",{ref:t,...s,className:(0,r.cn)(n)})}),u=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",n)})}),m=(0,s.forwardRef)((e,t)=>{let{className:n,isFullWidth:s,topPadding:l,...i}=e;return(0,a.jsx)("div",{ref:t,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",n)})}),p=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("w-full h-px bg-border",n)})}),x=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,...s,className:(0,r.cn)("text-foreground text-xl",n)})}),f=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,...s,className:(0,r.cn)("text-sm text-foreground-light",n)})}),h=(0,s.forwardRef)((e,t)=>{let{className:n,children:s,title:l,...i}=e;return(0,a.jsxs)("div",{ref:t,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[l&&(0,a.jsx)("h2",{children:l}),s]})}),g=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),y=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",n)})}),j=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex w-full items-center",n)})}),b=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-row gap-3",n)})}),v=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),N=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",n)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",p.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",v.displayName="ScaffoldColumn",h.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",N.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",f.displayName="ScaffoldSectionDescription"},95083:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var a=n(80263),s=n(53239),r=n(51500);let l=e=>{let[t,n]=s.useState(!1),[a,r]=s.useState(!1),[l,i]=s.useState(!1);return s.useEffect(()=>{let a=e.current;if(!a)return;let s=()=>{let e=a.scrollWidth>a.clientWidth;if(n(e),e){let e=a.scrollLeft>0,t=a.scrollLeft<a.scrollWidth-a.clientWidth;r(e),i(t)}else r(!1),i(!1)},l=()=>{if(t){let e=a.scrollLeft>0,t=a.scrollLeft<a.scrollWidth-a.clientWidth;r(e),i(t)}};return s(),a.addEventListener("scroll",l),window.addEventListener("resize",s),()=>{a.removeEventListener("scroll",l),window.removeEventListener("resize",s)}},[e,t]),{hasHorizontalScroll:t,canScrollLeft:a,canScrollRight:l}},i=s.forwardRef((e,t)=>{let{className:n,children:i,stickyLastColumn:o,...c}=e,d=s.useRef(null),{hasHorizontalScroll:u,canScrollLeft:m,canScrollRight:p}=l(d),x=(0,r.cn)("[&_td:last-child]:before:absolute [&_td:last-child]:before:top-0 [&_td:last-child]:before:-left-6","[&_td:last-child]:before:bottom-0 [&_td:last-child]:before:w-6 [&_td:last-child]:before:bg-gradient-to-l","[&_td:last-child]:before:from-black/5 dark:[&_td:last-child]:before:from-black/20 [&_td:last-child]:before:to-transparent","[&_td:last-child]:before:opacity-0 [&_td:last-child]:before:transition-all [&_td:last-child]:before:duration-400","[&_td:last-child]:before:easing-[0.24, 0.25, 0.05, 1] [&_td:last-child]:before:z-[60]","[&_th:last-child]:before:absolute [&_th:last-child]:before:top-0 [&_th:last-child]:before:-left-6","[&_th:last-child]:before:bottom-0 [&_th:last-child]:before:w-6 [&_th:last-child]:before:bg-gradient-to-l","[&_th:last-child]:before:from-black/5 dark:[&_th:last-child]:before:from-black/20 [&_th:last-child]:before:to-transparent","[&_th:last-child]:before:opacity-0 [&_th:last-child]:before:transition-all [&_th:last-child]:before:duration-400","[&_th:last-child]:before:easing-[0.24, 0.25, 0.05, 1] [&_th:last-child]:before:z-[60]");return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:(0,r.cn)("absolute inset-0 pointer-events-none z-50","before:absolute before:top-0 before:right-0 before:bottom-0 before:w-6 before:bg-gradient-to-l before:from-black/5 dark:before:from-black/20 before:to-transparent before:opacity-0 before:transition-all before:duration-400 before:easing-[0.24, 0.25, 0.05, 1]","after:absolute after:top-0 after:left-0 after:bottom-0 after:w-6 after:bg-gradient-to-r after:from-black/5 dark:after:from-black/20 after:to-transparent after:opacity-0 after:transition-all after:duration-400 after:easing-[0.24, 0.25, 0.05, 1]",u&&"hover:before:opacity-100 hover:after:opacity-100",p&&"before:opacity-100",m&&"after:opacity-100")}),(0,a.jsx)("div",{ref:d,className:(0,r.cn)("w-full overflow-auto",o&&["[&_tr>*:last-child]:sticky [&_tr>*:last-child]:z-50 [&_tr>*:last-child]:right-0","[&_tr:hover>*:last-child]:bg-transparent","[&_th>*:last-child]:bg-surface-100",x],u&&"[&_tr:hover>td:last-child]:!bg-surface-200",p&&"[&_td]:before:opacity-100 [&_tr>*:last-child]:before:opacity-100 [&_th:last-child]:before:opacity-100",n),...c,children:i})]})});i.displayName="ShadowScrollArea"},95359:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(80263),s=n(51500);let r=e=>{let{max:t=100,value:n=0,barClass:r="bg-foreground",bgClass:l="",type:i="vertical",borderClass:o="",labelBottom:c="",labelBottomClass:d="tabular-nums",labelTop:u="",labelTopClass:m=""}=e;if("horizontal"===i){let e=Number(n/t*100),i=c||u;return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[i&&(0,a.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,a.jsx)("p",{className:(0,s.cn)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",d),children:c}),(0,a.jsx)("p",{className:(0,s.cn)("text-foreground-light text-sm",m),children:u})]}),(0,a.jsx)("div",{className:"relative rounded h-1 overflow-hidden w-full border p-0 ".concat(l||"bg-surface-400"," ").concat(o||"border-none"),children:(0,a.jsx)("div",{className:"absolute rounded inset-x-0 bottom-0 h-1 ".concat(r," transition-all"),style:{width:"".concat(e,"%")}})})]})}{let e=Number(n/t*35);return e<2&&(e=2),(0,a.jsx)("div",{className:"relative rounded w-5 overflow-hidden border p-1 ".concat(l||"bg-gray-400"," ").concat(o||"border-none"),style:{height:35},children:(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 w-5 ".concat(r),style:{height:e}})})}}}}]);