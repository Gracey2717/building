try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c64c7d7b-97f9-42a1-9281-3317e3e4b749",e._sentryDebugIdIdentifier="sentry-dbid-c64c7d7b-97f9-42a1-9281-3317e3e4b749")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986,8819],{14861:(e,t,s)=>{"use strict";s.d(t,{K:()=>f,T:()=>g});var r=s(80263),a=s(53239),n=s(52647),l=s(51500),i=s(30435),o=s(53434),c=s.n(o),d=s(27344),u=s.n(d),m=s(37361),x=s.n(m);c().extend(u()),c().extend(x());let h=e=>c().unix(Number(e)/1e3/1e3).toISOString(),p=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},f=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?h(t):t;return c().utc(r).local().format(s)},y=e=>{let{utcTimestamp:t,format:s}=e,r=p(t)?h(t):t;return c().utc(r).format(s)},v=e=>{let{utcTimestamp:t}=e,s=p(t)?h(t):t;return c().utc(s).fromNow()},g=e=>{let{utcTimestamp:t,className:s,displayAs:o="local",format:c="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,u=f({utcTimestamp:t,format:c}),m=y({utcTimestamp:t,format:c}),x=v({utcTimestamp:t}),[h,p]=(0,a.useState)("start"),g=(0,a.useRef)(null),j=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,a.useEffect)(()=>{let e=()=>{if(g.current){let e=g.current.getBoundingClientRect(),t=window.innerHeight;p(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let w=e=>{let{label:t,value:s}=e,[i,o]=(0,a.useState)(!1);return(0,r.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,n.l)(s,()=>{o(!0),setTimeout(()=>{o(!1)},1e3)})},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":i}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,r.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,r.jsx)("div",{className:"border-t w-full border-dashed z-10"}),i&&(0,r.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,r.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,r.jsxs)(i.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(i.k$,{asChild:!0,ref:g,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("span",{children:"local"===o?f({utcTimestamp:t,format:d}):y({utcTimestamp:t,format:d})})}),(0,r.jsxs)(i.ZI,{align:h,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(w,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:j,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Relative",value:x,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(w,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},14888:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var r=s(32466);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,r.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),l=e=>(0,r.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function i(){let[e,t]=(0,r.ZA)("s",n(a.search)),[s,i]=(0,r.ZA)("its",n(a.timestampStart)),[o,c]=(0,r.ZA)("ite",n(a.timestampEnd)),[d,u]=(0,r.ZA)("log",n("")),[m,x]=(0,r.ZA)("f",l(a.filters)),h=e||a.search,p=s||a.timestampStart,f=o||a.timestampEnd,y=m||a.filters,v=e=>{t(e||a.search)},g=e=>{x(e||a.filters)};return{search:h,timestampStart:p,timestampEnd:f,selectedLogId:d||null,filters:y,setSearch:v,setTimeRange:(e,t)=>{i(e||a.timestampStart),c(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:g,updateFilter:(e,t)=>{g({...y,[e]:t})},reset:()=>{v(a.search),i(a.timestampStart),c(a.timestampEnd),u(""),x(a.filters)}}}},24771:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(80263);s(53239);let a=function(e){let{children:t,target:s="_blank",href:a,className:n,onClick:l,style:i}=e;return(0,r.jsx)("a",{onClick:l,href:a,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})}},27642:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(80263),a=s(53239),n=s(40279),l=s(60115);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,c]=(0,a.useReducer)(i,null),d=(0,n.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,r.jsx)("form",{id:s.id,name:s.name,onSubmit:d.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,r.jsx)(l.h,{values:d.values,errors:d.errors,formContextOnChange:d.handleChange,handleBlur:d.handleBlur,touched:d.touched,fieldLevelValidation:function(e,t){c({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:d.errors,touched:d.touched,isSubmitting:d.isSubmitting,isValidating:d.isValidating,submitCount:d.submitCount,initialValues:d.initialValues,values:d.values,handleReset:d.handleReset,resetForm:d.resetForm,setFieldValue:d.setFieldValue})})})}},27939:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var r=s(80263),a=s(24400),n=s(75232),l=s(90226),i=s(5816),o=s(97600),c=s(52361),d=s(31533),u=s(32267);let m=()=>{let e=(0,a.useRouter)(),{ref:t="default"}=(0,n.g)(),{authenticationSignInProviders:s,authenticationRateLimits:c,authenticationEmails:d,authenticationMultiFactor:m,authenticationAttackProtection:x,authenticationAdvanced:h}=(0,o.x)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:advanced"]);(0,i.$E)({projectRef:t});let p=e.pathname.split("/")[4];return(0,r.jsx)(l.l,{page:p,menu:(0,u.B)(t,{authenticationSignInProviders:s,authenticationRateLimits:c,authenticationEmails:d,authenticationMultiFactor:m,authenticationAttackProtection:x,authenticationAdvanced:h}),"data-sentry-element":"ProductMenu","data-sentry-component":"AuthProductMenu","data-sentry-source-file":"AuthLayout.tsx"})},x=(0,c.r)(e=>{let{children:t}=e;return(0,r.jsx)(d.A,{title:"Authentication",product:"Authentication",productMenu:(0,r.jsx)(m,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"AuthLayout","data-sentry-source-file":"AuthLayout.tsx",children:t})})},35862:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(17702),a=s(56947),n=s(53434),l=s.n(n),i=s(53239),o=s(58946),c=s(11366),d=s(65172),u=s(56677),m=s(14888);let x=(e,t)=>(0,i.useMemo)(()=>0!==e.length&&(0,c.l8)(e[0][t])?null==e?void 0:e.map(e=>(e[t]=(0,c.RT)(e[t]),e)):e,[JSON.stringify(e)]),h=function(e){var t,s,n,h,p;let{projectRef:f,table:y,filterOverride:v,limit:g}=e,j=(0,o.Et)(o.Z8),[w,b]=(0,i.useState)(new Date().toISOString()),{timestampStart:_,timestampEnd:N,filters:S,search:C}=(0,m.B)(),A=(0,i.useMemo)(()=>_||j.calcFrom(),[_,j]),U=(0,i.useMemo)(()=>N||j.calcTo(),[N,j]),k=(0,i.useMemo)(()=>({...S,...v,...C?{search_query:C}:{}}),[JSON.stringify(S),JSON.stringify(v),C]),M=(0,i.useMemo)(()=>({iso_timestamp_start:A,iso_timestamp_end:U,sql:(0,c.qr)(y,k,g)}),[A,U,y,k,g]),T=(0,i.useMemo)(()=>["projects",f,"logs",M],[f,M]),{data:I,isSuccess:E,isLoading:L,isRefetching:z,error:P,fetchNextPage:D,isFetchingNextPage:F,refetch:R}=(0,r.q)(T,async e=>{let{signal:t,pageParam:s}=e,{data:r,error:a}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{...M,iso_timestamp_end:s||M.iso_timestamp_end}},signal:t});if(a)throw a;return r},{refetchOnWindowFocus:!1,getNextPageParam(e){var t,s;if((null!=(s=null==(t=e.result)?void 0:t.length)?s:0)===0)return;let r=e.result.length,{timestamp:a}=e.result[r-1];return l().utc(Number(a/1e3)).toISOString()}}),{logData:O,error:H,oldestTimestamp:V}=(0,i.useMemo)(()=>{var e,t;let s=[],r=P?P.message:null;null==I||null==(e=I.pages)||e.forEach(e=>{(null==e?void 0:e.result)&&(s=[...s,...e.result]),!r&&(null==e?void 0:e.error)&&(r=e.error)});let a=s.length>0?null==(t=s[s.length-1])?void 0:t.timestamp:void 0;return{logData:s,error:r,oldestTimestamp:a}},[null==I?void 0:I.pages]),q=(0,i.useMemo)(()=>(0,c.oZ)(y,k),[y,k]),B=(0,i.useMemo)(()=>["projects",f,"logs-count",{projectRef:f,sql:q,iso_timestamp_start:w,iso_timestamp_end:U,table:y,mergedFilters:k}],[f,q,w,U,y,k]),{data:Z}=(0,a.I)(B,async e=>{let{signal:t}=e,{data:s,error:r}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{sql:q,iso_timestamp_start:w,iso_timestamp_end:U}},signal:t});if(r)throw r;return s},{refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!H&&!!I&&(null==I||null==(t=I.pages)?void 0:t.length)>0}),$=null!=(h=null==Z||null==(n=Z.result)||null==(s=n[0])?void 0:s.count)?h:0,G=(0,i.useMemo)(()=>(0,c.tS)(y,M,k),[y,M,k]),J=(0,i.useMemo)(()=>["projects",f,"logs-chart",{projectRef:f,sql:G,iso_timestamp_start:A,iso_timestamp_end:U}],[f,G,A,U]),{data:W,refetch:K}=(0,a.I)(J,async e=>{let{signal:t}=e,{data:s,error:r}=await (0,d.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:f},query:{iso_timestamp_start:A,iso_timestamp_end:U,sql:G}},signal:t});if(r)throw r;return s},{refetchOnWindowFocus:!1}),X=(0,i.useCallback)(async()=>{b(new Date().toISOString()),K(),R()},[R,K]),Q=x(null!=(p=null==W?void 0:W.result)?p:[],"timestamp"),{data:Y,error:ee}=(0,u.m)(Q,"timestamp","count",0,A,U||new Date().toISOString());return{newCount:$,logData:O,isSuccess:E,isLoading:L||z,isLoadingOlder:F,error:H||ee,filters:k,params:M,oldestTimestamp:V?String(V):void 0,eventChartData:Y,refresh:X,loadOlder:()=>D()}}},37632:(e,t,s)=>{"use strict";s.d(t,{aq:()=>c});var r=s(17702),a=s(15629),n=s(5483),l=s(63492),i=s(58982);let o=e=>{let{page:t=0,verified:s,keywords:r,providers:a,sort:n,order:l}=e,i=[];if(r&&""!==r){let e=r.replaceAll("'","''");i.push("id::text like '%".concat(e,"%' or email like '%").concat(e,"%' or phone like '%").concat(e,"%' or raw_user_meta_data->>'full_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'first_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'last_name' ilike '%").concat(e,"%' or raw_user_meta_data->>'display_name' ilike '%").concat(e,"%'"))}"verified"===s?i.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===s?i.push("is_anonymous is true"):"unverified"===s&&i.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),a&&a.length>0&&(a.includes("saml 2.0")?i.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(a.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):i.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(a.map(e=>"'".concat(e,"'")).join(", "),"]")));let o=i.map(e=>"(".concat(e,")")).join(" and ");return"".concat("\n  select *, coalesce((select array_agg(distinct i.provider) from auth.identities i where i.user_id = auth.users.id), '{}'::text[]) as providers from auth.users\n  ".trim()).concat(i.length>0?" where ".concat(o):"",' order by "').concat(null!=n?n:"created_at",'" ').concat(null!=l?l:"desc"," nulls last limit ").concat(50," offset ").concat(50*t,";")},c=function(e){let{projectRef:t,connectionString:s,keywords:c,filter:d,providers:u,sort:m,order:x}=e,{enabled:h=!0,...p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:f}=(0,n.YA)(),y=(null==f?void 0:f.status)===l.BU.ACTIVE_HEALTHY;return(0,r.q)(i.Z.usersInfinite(t,{keywords:c,filter:d,providers:u,sort:m,order:x}),e=>{let{signal:r,pageParam:n}=e;return(0,a.E)({projectRef:t,connectionString:s,sql:o({page:n,verified:d,keywords:c,providers:u,sort:null!=m?m:"created_at",order:null!=x?x:"desc"}),queryKey:i.Z.usersInfinite(t)},r)},{enabled:h&&void 0!==t&&y,getNextPageParam(e,t){let s=t.length;if(e.result.length>=50)return s},...p})}},43009:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/users",function(){return s(60956)}])},43181:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(15740).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},43242:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>x});var r=s(80263),a=s(53239),n=s(70800),l=s(51500),i=s(24771);function o(e){let{children:t,className:s,tag:a="div",style:n}=e;return(0,r.jsx)("".concat(a),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:s=1,children:a,style:n}=e;return(0,r.jsx)("h".concat(s),{style:n,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},o.Text=function(e){let{className:t,children:s,style:a,type:n,disabled:l,mark:i,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:x}=e;return o?(0,r.jsx)("code",{style:a,children:s}):i?(0,r.jsx)("mark",{style:a,children:s}):c?(0,r.jsx)("kbd",{style:a,children:s}):m?(0,r.jsx)("strong",{style:a,children:s}):(0,r.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},o.Link=i.A;let c=(0,a.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,r.jsx)(c.Provider,{value:{type:t},"data-sentry-element":"MenuContext.Provider","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},u=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function m(e){let{children:t,className:s,ulClassName:a,style:n,type:l="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:n,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:a,children:t})})})}m.Item=function(e){let{children:t,icon:s,active:a,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:m}=e,x=(0,n.A)("menu"),{type:h}=u(),p=[x.item.base];p.push(x.item.variants[h].base),a?p.push(x.item.variants[h].active):p.push(x.item.variants[h].normal);let f=[x.item.content.base];a?f.push(x.item.content.active):f.push(x.item.content.normal);let y=[x.item.icon.base];return a?y.push(x.item.icon.active):y.push(x.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:o,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:s}),(0,r.jsx)("span",{className:f.join(" "),children:t})]})},m.Group=function(e){let{children:t,icon:s,title:a}=e,l=(0,n.A)("menu"),{type:i}=u();return(0,r.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,r.jsx)("span",{className:l.group.icon,children:s}),(0,r.jsx)("span",{className:l.group.content,children:a}),t]})},m.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(o.Text,{"data-sentry-element":"Typography.Text","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let x=m},48114:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(80263),a=s(72852),n=s(37411),l=s(40022);let i=e=>{let{section:t}=e,s=(0,n.qM)();return(0,r.jsx)(l.$,{size:"tiny",type:"default",onClick:()=>{t&&s.setActiveDocsSection(t),s.setShowProjectApiDocs(!0)},icon:(0,r.jsx)(a.A,{strokeWidth:1.5,className:"text-foreground-muted"}),"data-sentry-element":"Button","data-sentry-component":"APIDocsButton","data-sentry-source-file":"APIDocsButton.tsx",children:"API Docs"})}},56677:(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var r=s(11366),a=s(53239);let n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.useMemo)(()=>{var e;let[s,a]=t;if(!(null==(e=s[0])?void 0:e[a]))return{data:s,error:void 0,isError:!1};try{return{data:(0,r.mu)(...t).sort((e,s)=>new Date(e[t[1]])-new Date(s[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},60956:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eV});var r=s(80263),a=s(32144),n=s(2827),l=s(17089),i=s(25643),o=s(75189),c=s(42661),d=s(84716),u=s(43181),m=s(15427),x=s(28881),h=s(53239),p=s(24560),f=s(73969),y=s(75232),v=s(72035),g=s(20313),j=s(48114),w=s(88602),b=s(12070),_=s(92512),N=s(58982),S=s(45209),C=s(56947),A=s(15629);let U=e=>{let{filter:t,keywords:s,providers:r}=e,a=[];if(s&&""!==s){let e=s.replaceAll("'","''");a.push("id::text ilike '%".concat(e,"%' or email ilike '%").concat(e,"%' or phone ilike '%").concat(e,"%'"))}"verified"===t?a.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===t?a.push("is_anonymous is true"):"unverified"===t&&a.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),r&&r.length>0&&(r.includes("saml 2.0")?a.push("(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[".concat(r.map(e=>"saml 2.0"===e?"'sso'":"'".concat(e,"'")).join(", "),"]").trim()):a.push("(raw_app_meta_data->>'providers')::jsonb ?| array[".concat(r.map(e=>"'".concat(e,"'")).join(", "),"]")));let n=a.map(e=>"(".concat(e,")")).join(" and ");return"".concat("select count(*) from auth.users").concat(a.length>0?" where ".concat(n):"",";")};async function k(e,t){var s;let{projectRef:r,connectionString:a,keywords:n,filter:l,providers:i}=e,o=U({filter:l,keywords:n,providers:i}),{result:c}=await (0,A.E)({projectRef:r,connectionString:a,sql:o,queryKey:["users-count"]},t),d=null==c||null==(s=c[0])?void 0:s.count;if("number"!=typeof d)throw Error("Error fetching users count");return d}let M=function(e){let{projectRef:t,connectionString:s,keywords:r,filter:a,providers:n}=e,{enabled:l=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(N.Z.usersCount(t,{keywords:r,filter:a,providers:n}),e=>{let{signal:l}=e;return k({projectRef:t,connectionString:s,keywords:r,filter:a,providers:n},l)},{enabled:l&&void 0!==t,...i})};var T=s(37632),I=s(97600),E=s(65303),L=s(5483),z=s(34531),P=s(40022),D=s(40990),F=s(51500),R=s(71139),O=s(82692),H=s(65841),V=s(89769),q=s(50204),B=s(27799),Z=s(60045),$=s(72259),G=s(8854);let J=(0,s(15740).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var W=s(64711),K=s(75019),X=s(32981),Q=s(36902),Y=s(87494),ee=s(10663),et=s(80251),es=s(65172);async function er(e){let{projectRef:t,user:s}=e,{data:r,error:a}=await (0,es.bE)("/platform/auth/{ref}/users",{params:{path:{ref:t}},body:{email:s.email,password:s.password,email_confirm:s.autoConfirmUser}});return a&&(0,es.H4)(a),r}let ea=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,et.n)(e=>er(e),{async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries(N.Z.usersInfinite(n)),r.invalidateQueries(N.Z.usersCount(n))]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?f.oR.error("Failed to create user: ".concat(e.message)):t(e,s,r)},...s})};var en=s(16838),el=s(47452),ei=s(93210),eo=s(74245);let ec=ee.Ik({email:ee.Yj().min(1,"Email is required").email("Must be a valid email address"),password:ee.Yj().min(1,"Password is required"),autoConfirmUser:ee.zM()}),ed=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,y.g)(),{can:n}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"create_user"),{mutate:l,isLoading:i}=ea({onSuccess(e){f.oR.success("Successfully created user: ".concat(e.email)),c.reset({email:"",password:"",autoConfirmUser:!0}),s(!1)}}),o=async e=>{if(!a)return console.error("Project ref is required");l({projectRef:a,user:e})},c=(0,Y.mN)({resolver:(0,X.u)(ec),defaultValues:{email:"",password:"",autoConfirmUser:!0}});return(0,r.jsx)(en.lG,{open:t,onOpenChange:s,"data-sentry-element":"Dialog","data-sentry-component":"CreateUserModal","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)(en.Cf,{size:"small","data-sentry-element":"DialogContent","data-sentry-source-file":"CreateUserModal.tsx",children:[(0,r.jsx)(en.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)(en.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"CreateUserModal.tsx",children:"Create a new user"})}),(0,r.jsx)(en.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(el.lV,{...c,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsxs)("form",{id:"create-user",className:"flex flex-col gap-y-4 p-6",onSubmit:c.handleSubmit(o),children:[(0,r.jsx)(el.zB,{name:"email",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(el.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(el.lR,{children:"Email address"}),(0,r.jsx)(el.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)(G.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(ei.p,{autoFocus:!0,...t,autoComplete:"off",type:"email",name:"email",placeholder:"user@example.com",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(el.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(el.zB,{name:"password",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(el.eI,{className:"flex flex-col gap-1",children:[(0,r.jsx)(el.lR,{children:"User Password"}),(0,r.jsx)(el.MJ,{children:(0,r.jsxs)("div",{className:"items-center relative",children:[(0,r.jsx)(Q.A,{size:18,className:"absolute left-2 top-1/2 transform -translate-y-1/2",strokeWidth:1.5}),(0,r.jsx)(ei.p,{...t,autoComplete:"new-password",type:"password",name:"password",placeholder:"••••••••",disabled:i,className:"pl-8"})]})}),(0,r.jsx)(el.C5,{})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(el.zB,{name:"autoConfirmUser",control:c.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(el.eI,{className:"flex items-center gap-x-2",children:[(0,r.jsx)(el.MJ,{children:(0,r.jsx)(eo.S,{checked:t.value,onCheckedChange:e=>t.onChange(e)})}),(0,r.jsx)(el.lR,{children:"Auto Confirm User?"})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx"}),(0,r.jsx)(el.lR,{"data-sentry-element":"FormLabel_Shadcn_","data-sentry-source-file":"CreateUserModal.tsx",children:(0,r.jsx)("p",{className:"text-sm text-foreground-lighter",children:"A confirmation email will not be sent when creating a user via this form."})}),(0,r.jsx)(P.$,{block:!0,size:"small",htmlType:"submit",loading:i,disabled:!n||i,"data-sentry-element":"Button","data-sentry-source-file":"CreateUserModal.tsx",children:"Create user"})]})})]})})};async function eu(e){let{projectRef:t,email:s}=e,{data:r,error:a}=await (0,es.bE)("/platform/auth/{ref}/invite",{params:{path:{ref:t}},body:{email:s}});return a&&(0,es.H4)(a),r}let em=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.jE)();return(0,et.n)(e=>eu(e),{async onSuccess(t,s,a){let{projectRef:n}=s;await Promise.all([r.invalidateQueries(N.Z.usersInfinite(n)),r.invalidateQueries(N.Z.usersCount(n))]),await (null==e?void 0:e(t,s,a))},async onError(e,s,r){void 0===t?f.oR.error("Failed to invite user: ".concat(e.message)):t(e,s,r)},...s})};var ex=s(67120),eh=s(27642),ep=s(95708);let ef=e=>{let{visible:t,setVisible:s}=e,{ref:a}=(0,y.g)(),{mutate:n,isLoading:l}=em({onSuccess:(e,t)=>{f.oR.success("Sent invite email to ".concat(t.email)),s(!1)}}),{can:i}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"invite_user"),o=async e=>{if(!a)return console.error("Project ref is required");n({projectRef:a,email:e.email})};return(0,r.jsx)(ex.A,{hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:()=>s(!t),"data-sentry-element":"Modal","data-sentry-component":"InviteUserModal","data-sentry-source-file":"InviteUserModal.tsx",children:(0,r.jsx)(eh.A,{validateOnBlur:!1,initialValues:{email:""},validate:e=>{let t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:o,"data-sentry-element":"Form","data-sentry-source-file":"InviteUserModal.tsx",children:()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ex.A.Content,{children:(0,r.jsx)(ep.A,{id:"email",className:"w-full",label:"User email",icon:(0,r.jsx)(G.A,{}),type:"email",name:"email",placeholder:"User email"})}),(0,r.jsx)(ex.A.Content,{children:(0,r.jsx)(P.$,{block:!0,size:"small",htmlType:"submit",loading:l,disabled:!i||l,children:"Invite user"})})]})})},"invite-user-modal")},ey=()=>{let e=(0,I.x)("authentication:show_send_invitation"),{can:t}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"invite_user"),{can:s}=(0,K.hl)(Z.aG.AUTH_EXECUTE,"create_user"),[a,n]=(0,h.useState)(!1),[l,i]=(0,h.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(R.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"AddUserDropdown.tsx",children:(0,r.jsx)(P.$,{type:"primary",iconRight:(0,r.jsx)($.A,{size:14,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"AddUserDropdown.tsx",children:"Add user"})}),(0,r.jsxs)(R.SQ,{side:"bottom",align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"AddUserDropdown.tsx",children:[e&&(0,r.jsxs)(W.x,{className:"gap-x-2",disabled:!t,onClick:()=>{t&&n(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to invite users"}},children:[(0,r.jsx)(G.A,{size:14}),(0,r.jsx)("p",{children:"Send invitation"})]}),(0,r.jsxs)(W.x,{className:"space-x-2 !pointer-events-auto",disabled:!s,onClick:()=>{s&&i(!0)},tooltip:{content:{side:"left",text:"You need additional permissions to create users"}},"data-sentry-element":"DropdownMenuItemTooltip","data-sentry-source-file":"AddUserDropdown.tsx",children:[(0,r.jsx)(J,{size:14,"data-sentry-element":"UserPlus","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)("p",{children:"Create new user"})]})]})]}),(0,r.jsx)(ef,{visible:a,setVisible:n,"data-sentry-element":"InviteUserModal","data-sentry-source-file":"AddUserDropdown.tsx"}),(0,r.jsx)(ed,{visible:l,setVisible:i,"data-sentry-element":"CreateUserModal","data-sentry-source-file":"AddUserDropdown.tsx"})]})};var ev=s(29622),eg=s(80586),ej=s(31492),ew=s(23445),eb=s(15601),e_=s.n(eb),eN=s(58946),eS=s(90437),eC=s(35862),eA=s(14888),eU=s(77635),ek=s(86254),eM=s(47142),eT=s(14861),eI=s(95301),eE=s(21957);let eL=e=>{let{user:t}=e,{ref:s}=(0,y.g)(),{filters:a,setFilters:n}=(0,eA.B)(),{logData:l,isSuccess:i,isLoading:o,refresh:c}=(0,eC.A)({projectRef:s,table:eN.eV.auth,filterOverride:{search_query:t.id},limit:5});return(0,h.useEffect)(()=>{t.id&&n({...a,search_query:t.id})},[t.id]),(0,r.jsxs)("div",{"data-sentry-component":"UserLogs","data-sentry-source-file":"UserLogs.tsx",children:[(0,r.jsx)(eI.x,{user:t,"data-sentry-element":"UserHeader","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsx)(eU.w,{"data-sentry-element":"Separator","data-sentry-source-file":"UserLogs.tsx"}),(0,r.jsxs)("div",{className:(0,F.cn)("flex flex-col gap-y-3",eE.jU),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Authentication logs"}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Latest logs from authentication for this user in the past hour"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(P.$,{type:"status_code"in a?"default":"secondary",className:"rounded-r-none border-r-0",disabled:o,onClick:()=>n({search_query:t.id}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Show all"}),(0,r.jsx)("div",{className:"border-button border border-l-0 py-3"}),(0,r.jsx)(P.$,{type:"status_code"in a?"secondary":"default",className:"rounded-l-none border-l-0",disabled:o,onClick:()=>n({search_query:t.id,status_code:{client_error:!0,server_error:!0}}),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Error only"})]}),(0,r.jsx)(P.$,{type:"default",loading:o,disabled:o,icon:(0,r.jsx)(u.A,{}),onClick:()=>c(),"data-sentry-element":"Button","data-sentry-source-file":"UserLogs.tsx",children:"Refresh"})]}),o&&!i?(0,r.jsx)(eS.y,{}):0===l.length?(0,r.jsx)(eM.Z,{type:"note",title:"No authentication logs available for this user",description:"Auth events such as logging in will be shown here"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"border border-b-0 rounded-t-md divide-y overflow-hidden",children:l.map(e=>{var t;let a=(null!=(t=e.status)?t:"-").toString(),n=a.startsWith("4"),l=a.startsWith("5");return(0,r.jsxs)("div",{className:"flex items-center transition font-mono px-2 py-1.5 bg-surface-100 divide-x",children:[(0,r.jsx)("p",{className:"text-xs text-foreground-light min-w-[125px] w-[125px] px-1",children:(0,r.jsx)(eT.T,{utcTimestamp:e.timestamp/1e3})}),(0,r.jsx)("div",{className:"flex items-center text-xs text-foreground-light h-[22px] min-w-[70px] w-[70px] px-2",children:(0,r.jsxs)("div",{className:(0,F.cn)("flex items-center justify-center gap-x-1",!!e.status&&"border px-1 py-0.5 rounded",n?"text-warning border-warning bg-warning-300":l?"text-destructive border-destructive bg-destructive-300":""),children:[(n||l)&&(0,r.jsx)(ek.HV,{hideBackground:!0,className:(0,F.cn)(n&&"text-warning-600")}),a]})}),(0,r.jsxs)("p",{className:"group relative flex items-center py-1.5 text-xs text-foreground-light px-2 truncate w-full",children:["".concat(e.path," | ").concat(e.msg),(0,r.jsx)(w.G,{type:"outline",asChild:!0,tooltip:{content:{text:"Open in logs"}},className:"px-1.5 absolute right-0 top-0 opacity-0 group-hover:opacity-100 transition bg-background focus-visible:opacity-100",children:(0,r.jsx)(e_(),{href:"/project/".concat(s,"/logs/auth-logs?log=").concat(e.id),children:(0,r.jsx)(ew.A,{size:"12",className:"text-foreground-light"})})})]})]},e.id)})}),(0,r.jsx)(P.$,{block:!0,asChild:!0,type:"outline",className:"transition rounded-t-none text-foreground-light hover:text-foreground",children:(0,r.jsx)(e_(),{href:"/project/".concat(s,"/logs/auth-logs?s=").concat(t.id),children:"See more logs"})})]})]})]})};var ez=s(22759);let eP=e=>{let{selectedUser:t,onClose:s}=e,[a,n]=(0,h.useState)("overview"),[l,o]=(0,h.useState)(""),c=t?Object.entries(t).filter(e=>{let[t,s]=e;return t.toLowerCase().includes(l.toLowerCase())||"string"==typeof s&&s.toLowerCase().includes(l.toLowerCase())}).reduce((e,t)=>{let[s,r]=t;return void 0!==r&&(e[s]=r),e},{}):{};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(H.wV,{defaultSize:30,maxSize:45,minSize:30,className:"bg-studio border-t","data-sentry-element":"ResizablePanel","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(P.$,{type:"text",className:"absolute top-3 right-3 px-1",icon:(0,r.jsx)(i.A,{}),onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsxs)(eg.tU,{value:a,className:"flex flex-col h-full",onValueChange:e=>n(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)(eg.j7,{className:"px-5 flex gap-x-4 min-h-[46px]","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsx)(eg.Xi,{value:"overview",className:"px-0 pb-0 h-full text-xs  data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Overview"}),(0,r.jsx)(eg.Xi,{value:"logs",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Logs"}),(0,r.jsx)(eg.Xi,{value:"raw",className:"px-0 pb-0 h-full text-xs data-[state=active]:bg-transparent !shadow-none","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:"Raw JSON"})]}),(0,r.jsx)(eg.av,{value:"overview",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(ez.nz,{user:t,onDeleteSuccess:s})}),(0,r.jsx)(eg.av,{value:"logs",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto"),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:t&&(0,r.jsx)(eL,{user:t})}),(0,r.jsxs)(eg.av,{value:"raw",className:(0,F.cn)("mt-0 flex-grow min-h-0 overflow-y-auto",eE.jU),"data-sentry-element":"TabsContent_Shadcn_","data-sentry-source-file":"UserPanel.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(ei.p,{autoFocus:!0,type:"text",placeholder:"Filter...",value:l,onChange:e=>o(e.target.value),className:"mr-2","data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"UserPanel.tsx"}),(0,r.jsx)(P.$,{type:"text",disabled:!l,onClick:()=>o(""),className:"text-xs","data-sentry-element":"Button","data-sentry-source-file":"UserPanel.tsx",children:"Clear"})]}),(0,r.jsx)(ej.X,{className:"javascript","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"UserPanel.tsx",children:JSON.stringify(c,null,2)})]})]})]})]})};var eD=s(26005);let eF=()=>{var e,t;let s=(0,a.jE)(),{ref:C}=(0,y.g)(),{data:A}=(0,L.YA)(),U=(0,h.useRef)(null),k=(0,h.useRef)(0),Z=(0,v.hx)(),{authenticationShowProviderFilter:$,authenticationShowSortByEmail:G,authenticationShowSortByPhone:J,authenticationShowUserTypeFilter:W}=(0,I.x)(["authentication:show_provider_filter","authentication:show_sort_by_email","authentication:show_sort_by_phone","authentication:show_user_type_filter"]),[K,X]=(0,h.useState)([]),[Q,Y]=(0,h.useState)(""),[ee,et]=(0,h.useState)("all"),[es,er]=(0,h.useState)(""),[ea,en]=(0,h.useState)([]),[el,ei]=(0,h.useState)([]),[eo,ec]=(0,h.useState)("created_at:desc"),[ed,eu]=(0,h.useState)(),[em,ex]=(0,h.useState)(new Set([])),[eh,ep]=(0,h.useState)(),[ef,eg]=(0,h.useState)(!1),[ej,ew]=(0,h.useState)(!1),[eb,e_,{isSuccess:eN,isError:eS,error:eC}]=(0,E.U)(y.rS.AUTH_USERS_COLUMNS_CONFIGURATION(null!=C?C:""),null),[eA,eU]=eo.split(":"),{data:ek,error:eM,isSuccess:eT,isLoading:eI,isRefetching:eL,isError:ez,isFetchingNextPage:eF,refetch:eR,hasNextPage:eO,fetchNextPage:eH}=(0,T.aq)({projectRef:C,connectionString:null==A?void 0:A.connectionString,keywords:es,filter:"all"===ee?void 0:ee,providers:el,sort:eA,order:eU},{keepPreviousData:!!es,staleTime:1/0}),{data:eV,refetch:eq}=M({projectRef:C,connectionString:null==A?void 0:A.connectionString,keywords:es,filter:"all"===ee?void 0:ee,providers:el}),{mutateAsync:eB}=(0,S.X)(),eZ=(0,h.useMemo)(()=>{var e;return null!=(e=null==ek?void 0:ek.pages.flatMap(e=>e.result))?e:[]},[null==ek?void 0:ek.pages]),e$=eZ.find(e=>e.id===[...em][0]),eG=()=>{Y(""),er("")},eJ=(e,t,s)=>{let r=e.slice(),[a]=r.splice(t,1);return r.splice(s,0,a),r},eW=(0,n.A)((e,t)=>{"toggle"===e?e_(t.columns.map(e=>({id:e.key,width:e.width}))):"resize"===e?e_(K.map((e,s)=>({id:e.key,width:s===t.idx?t.width:e.width}))):"reorder"===e&&e_(t.columns.map(e=>({id:e.key,width:e.width})))},500),eK=async()=>{if(!C)return console.error("Project ref is required");let e=[...em];ew(!0);try{await Promise.all(e.map(e=>eB({projectRef:C,userId:e,skipInvalidation:!0}))),await Promise.all([s.invalidateQueries(N.Z.usersInfinite(C)),s.invalidateQueries(N.Z.usersCount(C))]),f.oR.success("Successfully deleted the selected ".concat(em.size," user").concat(em.size>1?"s":"")),eg(!1),ex(new Set([])),e.includes(ed)&&eu(void 0)}catch(e){f.oR.error("Failed to delete selected users: ".concat(e.message))}finally{ew(!1)}};return(0,h.useEffect)(()=>{if(!eL&&(eN||eS&&eC.message.includes("data is undefined"))){let e=(0,eD.yA)({config:null!=eb?eb:[],users:null!=eZ?eZ:[],visibleColumns:ea,setSortByValue:ec,onSelectDeleteUser:ep});X(e),e.length<eE.AF.length&&en(e.filter(e=>"img"!==e.key).map(e=>e.key))}},[eT,eL,eN,eS,eC,eZ,em]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)(_.M,{className:"py-4 px-6 !mb-0",title:"Users","data-sentry-element":"FormHeader","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsx)("div",{className:"bg-surface-200 py-3 px-4 md:px-6 flex flex-col lg:flex-row lg:items-center justify-between gap-2 border-t",children:em.size>0?(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsxs)(P.$,{type:"default",icon:(0,r.jsx)(l.A,{}),onClick:()=>eg(!0),children:["Delete ",em.size," users"]}),(0,r.jsx)(w.G,{type:"default",icon:(0,r.jsx)(i.A,{}),className:"px-1.5",onClick:()=>ex(new Set([])),tooltip:{content:{side:"bottom",text:"Cancel selection"}}})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)(V.p,{size:"tiny",className:"w-52 pl-7 bg-transparent",iconContainerClassName:"pl-2",icon:(0,r.jsx)(o.A,{size:14,className:"text-foreground-lighter"}),placeholder:"Search email, phone or UID",value:Q,onChange:e=>Y(e.target.value),onKeyDown:e=>{"Enter"===e.code&&(Y(Q.trim()),er(Q.trim().toLocaleLowerCase()))},actions:[Q&&(0,r.jsx)(P.$,{size:"tiny",type:"text",icon:(0,r.jsx)(i.A,{}),onClick:()=>eG(),className:"p-0 h-5 w-5"})]}),W&&(0,r.jsxs)(D.l6,{value:ee,onValueChange:e=>et(e),children:[(0,r.jsx)(D.bq,{size:"tiny",className:(0,F.cn)("w-[140px] !bg-transparent","all"===ee&&"border-dashed"),children:(0,r.jsx)(D.yv,{})}),(0,r.jsx)(D.gC,{children:(0,r.jsxs)(D.s3,{children:[(0,r.jsx)(D.eb,{value:"all",className:"text-xs",children:"All users"}),(0,r.jsx)(D.eb,{value:"verified",className:"text-xs",children:"Verified users"}),(0,r.jsx)(D.eb,{value:"unverified",className:"text-xs",children:"Unverified users"}),(0,r.jsx)(D.eb,{value:"anonymous",className:"text-xs",children:"Anonymous users"})]})})]}),$&&(0,r.jsx)(b.I,{name:"Provider",options:eE.UC,labelKey:"name",valueKey:"value",iconKey:"icon",activeOptions:el,labelClass:"text-xs",maxHeightClass:"h-[190px]",className:"w-52",onSaveFilters:ei}),(0,r.jsx)("div",{className:"border-r border-strong h-6"}),(0,r.jsx)(b.I,{name:0===ea.length?"All columns":"Columns",title:"Select columns to show",buttonType:0===ea.length?"dashed":"default",options:eE.AF.slice(1),labelKey:"name",valueKey:"id",labelClass:"text-xs",maxHeightClass:"h-[190px]",clearButtonText:"Reset",activeOptions:ea,onSaveFilters:e=>{let t=(null!=eb?eb:[]).slice();0===e.length?t=eE.AF.map(e=>({id:e.id,width:e.width})):e.forEach(e=>{var s;t.find(t=>t.id===e)||t.push({id:e,width:null==(s=eE.AF.find(t=>t.id===e))?void 0:s.width})});let s=(0,eD.yA)({config:t,users:null!=eZ?eZ:[],visibleColumns:e,setSortByValue:ec,onSelectDeleteUser:ep});en(e),X(s),eW("toggle",{columns:s})}}),(0,r.jsxs)(R.rI,{children:[(0,r.jsx)(R.ty,{asChild:!0,children:(0,r.jsxs)(P.$,{icon:"desc"===eU?(0,r.jsx)(c.A,{}):(0,r.jsx)(d.A,{}),children:["Sorted by ",eA.replaceAll("_"," ")]})}),(0,r.jsx)(R.SQ,{className:"w-44",align:"start",children:(0,r.jsxs)(R.Hr,{value:eo,onValueChange:ec,children:[(0,r.jsxs)(R.lv,{children:[(0,r.jsx)(R.nV,{children:"Sort by created at"}),(0,r.jsxs)(R.M5,{children:[(0,r.jsx)(R.Ht,{value:"created_at:asc",children:"Ascending"}),(0,r.jsx)(R.Ht,{value:"created_at:desc",children:"Descending"})]})]}),(0,r.jsxs)(R.lv,{children:[(0,r.jsx)(R.nV,{children:"Sort by last sign in at"}),(0,r.jsxs)(R.M5,{children:[(0,r.jsx)(R.Ht,{value:"last_sign_in_at:asc",children:"Ascending"}),(0,r.jsx)(R.Ht,{value:"last_sign_in_at:desc",children:"Descending"})]})]}),G&&(0,r.jsxs)(R.lv,{children:[(0,r.jsx)(R.nV,{children:"Sort by email"}),(0,r.jsxs)(R.M5,{children:[(0,r.jsx)(R.Ht,{value:"email:asc",children:"Ascending"}),(0,r.jsx)(R.Ht,{value:"email:desc",children:"Descending"})]})]}),J&&(0,r.jsxs)(R.lv,{children:[(0,r.jsx)(R.nV,{children:"Sort by phone"}),(0,r.jsxs)(R.M5,{children:[(0,r.jsx)(R.Ht,{value:"phone:asc",children:"Ascending"}),(0,r.jsx)(R.Ht,{value:"phone:desc",children:"Descending"})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[Z&&(0,r.jsx)(j.A,{section:["user-management"]}),(0,r.jsx)(P.$,{size:"tiny",icon:(0,r.jsx)(u.A,{}),type:"default",loading:eL&&!eF,onClick:()=>{eR(),eq()},children:"Refresh"}),(0,r.jsx)(ey,{})]})]})}),(0,r.jsx)(O.$,{loading:eI||eL||eF,"data-sentry-element":"LoadingLine","data-sentry-source-file":"UsersV2.tsx"}),(0,r.jsxs)(H.HK,{direction:"horizontal",className:"relative flex flex-grow bg-alternative min-h-0",autoSaveId:"query-performance-layout-v1","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"UsersV2.tsx",children:[(0,r.jsx)(H.wV,{defaultSize:1,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,r.jsx)(p.Ay,{ref:U,className:"flex-grow border-t-0",rowHeight:44,headerRowHeight:36,columns:K,rows:(0,eD.uJ)(null!=eZ?eZ:[]),rowClass:e=>{let t=e.id===ed;return["".concat(t?"bg-surface-300 dark:bg-surface-300":"bg-200"," cursor-pointer"),"[&>.rdg-cell]:border-box [&>.rdg-cell]:outline-none [&>.rdg-cell]:shadow-none","[&>.rdg-cell:first-child>div]:ml-4"].join(" ")},rowKeyGetter:e=>e.id,selectedRows:em,onScroll:e=>{let t=k.current!==e.currentTarget.scrollLeft;k.current=e.currentTarget.scrollLeft,!eI&&!eF&&!t&&(0,z.vY)(e)&&eO&&eH()},onSelectedRowsChange:e=>{e.size>eE.GS?(0,f.oR)("Only up to ".concat(eE.GS," users can be selected at a time")):ex(e)},onColumnResize:(e,t)=>eW("resize",{idx:e,width:t}),onColumnsReorder:(e,t)=>{let s=K.findIndex(t=>t.key===e),r=K.findIndex(e=>e.key===t),a=eJ(K,s,r);X(a),eW("reorder",{columns:a})},renderers:{renderRow:(e,t)=>(0,r.jsx)(p.fI,{...t,onClick:()=>{let s=eZ.find(t=>t.id===e);if(s){let e=eZ.indexOf(s);if(t.row.id){var r;eu(t.row.id),null==(r=U.current)||r.scrollToCell({idx:0,rowIdx:e})}}}}),noRowsFallback:eI?(0,r.jsx)("div",{className:"absolute top-14 px-6 w-full",children:(0,r.jsx)(B.y,{})}):ez?(0,r.jsx)("div",{className:"absolute top-14 px-6 flex flex-col items-center justify-center w-full",children:(0,r.jsx)(g.A,{subject:"Failed to retrieve users",error:eM})}):(0,r.jsxs)("div",{className:"absolute top-20 px-6 flex flex-col items-center justify-center w-full gap-y-2",children:[(0,r.jsx)(m.A,{className:"text-foreground-lighter",strokeWidth:1}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-foreground",children:"all"!==ee||es.length>0?"No users found":"No users in your project"}),(0,r.jsx)("p",{className:"text-foreground-light",children:"all"!==ee||es.length>0?"There are currently no users based on the filters applied":"There are currently no users who signed up to your project"})]})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"UsersV2.tsx"})})}),void 0!==ed&&(0,r.jsx)(eP,{selectedUser:eZ.find(e=>e.id===ed),onClose:()=>eu(void 0)})]}),(0,r.jsxs)("div",{className:"flex justify-between min-h-9 h-9 overflow-hidden items-center px-6 w-full border-t text-xs text-foreground-light",children:[eI||eL?"Loading users...":"Total: ".concat(null!=eV?eV:0," users"),(eI||eL||eF)&&(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)(x.A,{size:14,className:"animate-spin"})," Loading..."]})]})]}),(0,r.jsx)(q.A,{visible:ef,variant:"destructive",title:"Confirm to delete ".concat(em.size," user").concat(em.size>1?"s":""),loading:ej,confirmLabel:"Delete",onCancel:()=>eg(!1),onConfirm:()=>eK(),alert:{title:"Deleting ".concat(1===em.size?"a user":"users"," is irreversible"),description:"This will remove the selected ".concat(1===em.size?"":"".concat(em.size," "),"user").concat(em.size>1?"s":""," from the project and all associated data.")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"UsersV2.tsx",children:(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the"," ",1===em.size?"":"selected ".concat(em.size," "),"user",em.size>1?"s":"",1===em.size?(0,r.jsxs)("span",{className:"text-foreground",children:[" ",null!=(t=null!=(e=null==e$?void 0:e$.email)?e:null==e$?void 0:e$.phone)?t:"this user"]}):null,"?"]})}),(0,r.jsx)(ev.i,{visible:!!eh,selectedUser:eh,onClose:()=>ep(void 0),onDeleteSuccess:()=>{(null==eh?void 0:eh.id)===ed&&eu(void 0),ep(void 0)},"data-sentry-element":"DeleteUserModal","data-sentry-source-file":"UsersV2.tsx"})]})};var eR=s(27939),eO=s(96232);let eH=()=>(0,r.jsx)(eF,{"data-sentry-element":"UsersV2","data-sentry-component":"UsersPage","data-sentry-source-file":"users.tsx"});eH.getLayout=e=>(0,r.jsx)(eO.A,{children:(0,r.jsx)(eR.A,{children:e})});let eV=eH},73047:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(80263),a=s(15601),n=s.n(a),l=s(43242),i=s(2119),o=s(40022);let c=e=>{let{name:t="",isActive:s,isExternal:a,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:h="",hoverText:p="",label:f}=e,y=(0,r.jsx)(l.Ay.Item,{icon:c,rounded:!0,active:s,onClick:x,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,r.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,r.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),d&&(0,r.jsx)("div",{children:d})]})});return u?a?(0,r.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,r.jsx)(n(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(n(),{href:u,className:"block",target:m,children:y}):y}},89769:(e,t,s)=>{"use strict";s.d(t,{p:()=>m});var r=s(80263),a=s(29012),n=s(53239),l=s(52647),i=s(51500),o=s(93210),c=s(40022),d=s(70800);function u(e){let{icon:t,className:s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",s),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let m=(0,n.forwardRef)((e,t)=>{let{copy:s,showCopyOnHover:m=!1,icon:x,reveal:h=!1,actions:p,onCopy:f,iconContainerClassName:y,containerClassName:v,...g}=e,[j,w]=(0,n.useState)("Copy"),[b,_]=(0,n.useState)(!0),N=(0,d.A)("input"),S=[];return x&&S.push(N.with_icon),(0,r.jsxs)("div",{className:(0,i.cn)("relative group",v),children:[(0,r.jsx)(o.p,{ref:t,...g,onCopy:f,value:h&&b?"**** **** **** ****":g.value,className:(0,i.cn)(...S,g.className)}),x&&(0,r.jsx)(u,{icon:x,className:y}),s||p?(0,r.jsxs)("div",{className:N.actions_container,children:[s&&!(h&&b)?(0,r.jsx)(c.$,{size:"tiny",type:"default",className:(0,i.cn)(m&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,r.jsx)(a.A,{size:16,className:"text-foreground-muted"}),onClick:()=>{var e;return e=g.value,void(0,l.l)(e,()=>{w("Copied"),setTimeout(function(){w("Copy")},3e3),null==f||f()})},children:j}):null,h&&b?(0,r.jsx)(c.$,{size:"tiny",type:"default",onClick:function(){_(!1)},children:"Reveal"}):null,p&&p]}):null]})})},90226:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var r=s(80263),a=s(43242),n=s(2119),l=s(73047);let i=e=>{let{page:t,menu:s}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,r.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:s.map((e,i)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(a.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(n.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},92512:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var r=s(80263),a=s(51500),n=s(62136);let l=e=>{let{title:t,description:s,docsUrl:l,actions:i,className:o}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,r.jsx)("div",{className:"prose text-sm max-w-2xl",children:s})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,r.jsx)(n.A,{href:l}),i]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2313,9441,7494,4280,7598,4915,4560,6797,4674,2360,6110,6712,7795,4968,876,5089,9239,1895,3709,5573,9897,6585,279,6692,7686,8343,2690,6232,597,8119,1533,1444,3064,636,6593,8792],()=>t(43009)),_N_E=e.O()}]);