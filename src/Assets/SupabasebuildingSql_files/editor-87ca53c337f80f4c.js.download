try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0170cf8f-d669-4d1b-a2b8-5b1106d03cbc",e._sentryDebugIdIdentifier="sentry-dbid-0170cf8f-d669-4d1b-a2b8-5b1106d03cbc")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4986,6851],{24566:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/editor",function(){return a(71144)}])},71144:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(80263),r=a(24400),l=a(53239),i=a(75232),n=a(78362),c=a(96232),d=a(93349),o=a(81269),u=a(44665),p=a(90941),m=a(37411),x=a(55555);let f=()=>{let e=(0,r.useRouter)(),{ref:t}=(0,i.g)(),a=(0,x.zv)(),c=(0,m.qM)();return(0,l.useEffect)(()=>{let s=c.dashboardHistory.editor,r=a.openTabs.find(e=>{var t;return x.qm.table.includes(null==(t=a.tabsMap[e])?void 0:t.type)});if(void 0!==s)e.push("/project/".concat(t,"/editor/").concat(c.dashboardHistory.editor));else if(r){var l;let s=a.tabsMap[r];s&&e.push("/project/".concat(t,"/editor/").concat(null==(l=s.metadata)?void 0:l.tableId))}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.A,{"data-sentry-element":"NewTab","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(n.A,{onTableCreated:a=>{e.push("/project/".concat(t,"/editor/").concat(a.id))},"data-sentry-element":"SidePanelEditor","data-sentry-source-file":"index.tsx"})]})};f.getLayout=e=>(0,s.jsx)(c.A,{children:(0,s.jsx)(d.$,{productMenu:(0,s.jsx)(u.X,{}),product:"Table Editor",productMenuClassName:"overflow-y-hidden",children:(0,s.jsx)(o.A,{children:e})})});let h=f},90941:(e,t,a)=>{"use strict";a.d(t,{A:()=>U});var s=a(80263),r=a(60045),l=a(53667),i=a.n(l),n=a(36760),c=a(15601),d=a.n(c),o=a(24400),u=a(73969),p=a(75232),m=a(44821),x=a(79512),f=a(57132),h=a(75019),g=a(23385),j=a(5483),y=a(34531),b=a(33986),v=a(12046),N=a(79033),w=a(55555),q=a(12644),k=a(51500),_=a(80586),C=a(40022),I=a(69690),T=a(68743),E=a(53434),R=a.n(E),A=a(97507),P=a(88712),L=a(92171);function S(){let{ref:e}=(0,p.g)(),t=(0,w.zv)(),a=(0,I.l)();if(!(null==t?void 0:t.recentItems)||!e)return null;let r=(a?t.recentItems.filter(e=>w.qm[a].includes(e.type)):[...t.recentItems]).sort((e,t)=>t.timestamp-e.timestamp);return(0,s.jsxs)("div",{className:"space-y-4","data-sentry-component":"RecentItems","data-sentry-source-file":"RecentItems.tsx",children:[(0,s.jsx)("h2",{className:"text-sm text-foreground",children:"Recent items"}),(0,s.jsx)("div",{className:"flex flex-col gap-0",children:0===r.length?(0,s.jsxs)(A.P.div,{layout:!0,initial:!1,className:"flex flex-col items-center justify-center p-8 text-center border rounded-md border-muted gap-3",children:[(0,s.jsx)(L.L,{type:"r"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"No recent items yet"}),(0,s.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Items will appear here as you browse through your project"})]})]}):(0,s.jsx)(P.N,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12 gap-y-0",children:r.map((t,a)=>{var r,l,i,n,c,o,u;return(0,s.jsx)(A.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.012*a,duration:.15},children:(0,s.jsxs)(d(),{href:"/project/".concat(e,"/").concat("sql"===t.type?"sql/".concat(null==(r=t.metadata)?void 0:r.sqlId):"r"===t.type||"v"===t.type||"m"===t.type||"f"===t.type||"p"===t.type?"editor/".concat(null==(l=t.metadata)?void 0:l.tableId,"?schema=").concat(null==(i=t.metadata)?void 0:i.schema):"explorer/".concat(t.type,"/").concat(null==(n=t.metadata)?void 0:n.schema,"/").concat(null==(c=t.metadata)?void 0:c.name)),className:"flex items-center gap-4 rounded-lg bg-surface-100 py-2 transition-colors hover:bg-surface-200",children:[(0,s.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-surface-100 border",children:(0,s.jsx)(L.L,{type:t.type})}),(0,s.jsxs)("div",{className:"flex flex-1 gap-5 items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-foreground",children:[(0,s.jsx)("span",{className:"text-foreground-lighter",children:null==(o=t.metadata)?void 0:o.schema}),(null==(u=t.metadata)?void 0:u.schema)&&(0,s.jsx)("span",{className:"text-foreground-light",children:"."}),(0,s.jsx)("span",{className:"text-foreground",children:t.label||"Untitled"})]}),(0,s.jsx)("div",{className:"bg-border-muted flex grow h-px"}),(0,s.jsx)("span",{className:"text-xs text-foreground-lighter",children:R()(t.timestamp).fromNow()})]})]})},t.id)})})})})]})}function U(){let e=(0,o.useRouter)(),{ref:t}=(0,p.g)(),a=(0,I.l)(),{profile:l}=(0,b.xc)(),{data:c}=(0,g.s)(),{data:E}=(0,j.YA)(),R=(0,N.ap)(),A=(0,v.aP)(),P=(0,w.zv)(),[L]=i()(m.R,{type:"template"}),[U]=i()(m.R,{type:"quickstart"}),{mutate:W}=(0,f.h)(),z=(0,h.SE)(r.aG.CREATE,"user_content",{resource:{type:"sql",owner_id:null==l?void 0:l.id},subject:{id:null==l?void 0:l.id}}),D=[{icon:(0,s.jsx)(n.A,{className:"h-4 w-4 text-foreground",strokeWidth:1.5}),title:"Create a table",description:"Design and create a new database table",bgColor:"bg-blue-500",isBeta:!1,onClick:R.onAddTable}],M=[{icon:(0,s.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5}),title:"New SQL Snippet",description:"Execute SQL queries",bgColor:"bg-green-500",isBeta:!1,onClick:()=>e.push("/project/".concat(t,"/sql/new"))}],X=async(a,s)=>{if(!t)return console.error("Project ref is required");if(!E)return console.error("Project is required");if(!l)return console.error("Profile is required");if(!z)return(0,u.oR)("Your queries will not be saved as you do not have sufficient permissions");try{let r=(0,x.fW)({id:(0,y.gZ)(),name:s,sql:a,owner_id:null==l?void 0:l.id,project_id:null==E?void 0:E.id});A.addSnippet({projectRef:t,snippet:r}),A.addNeedsSaving(r.id);let i=(0,w.lW)("sql",{id:r.id});P.addTab({id:i,type:"sql",label:s,metadata:{sqlId:r.id}}),e.push("/project/".concat(t,"/sql/").concat(r.id))}catch(e){u.oR.error("Failed to create new query: ".concat(e.message))}};return(0,s.jsxs)("div",{className:"bg-surface-100 h-full overflow-y-auto py-12","data-sentry-component":"NewTab","data-sentry-source-file":"NewTab.tsx",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col gap-10 px-10",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("sql"===a?M:D).map((e,t)=>(0,s.jsx)(T.L,{...e},"action-card-".concat(t)))}),(0,s.jsx)(S,{"data-sentry-element":"RecentItems","data-sentry-source-file":"NewTab.tsx"})]}),"sql"===a&&(0,s.jsx)("div",{className:"flex flex-col gap-4 mx-auto py-10",children:(0,s.jsxs)(_.tU,{defaultValue:"templates",children:[(0,s.jsxs)(_.j7,{className:"mx-auto justify-center gap-5",children:[(0,s.jsx)(_.Xi,{value:"templates",children:"Templates"}),(0,s.jsx)(_.Xi,{value:"quickstarts",children:"Quickstarts"})]}),(0,s.jsxs)(_.av,{value:"templates",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:L.slice(0,9).map((e,a)=>(0,s.jsx)(T.L,{onClick:()=>{var a;X(e.sql,e.title),W({action:"sql_editor_template_clicked",properties:{templateName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(a=null==c?void 0:c.slug)?a:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(a)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(C.$,{asChild:!0,type:"default",children:(0,s.jsx)(d(),{href:"/project/".concat(t,"/sql/templates"),children:"View more templates"})})})]}),(0,s.jsxs)(_.av,{value:"quickstarts",className:"max-w-5xl mx-auto py-5",children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 px-8",children:U.map((e,a)=>(0,s.jsx)(T.L,{onClick:()=>{var a;X(e.sql,e.title),W({action:"sql_editor_quickstart_clicked",properties:{quickstartName:e.title},groups:{project:null!=t?t:"Unknown",organization:null!=(a=null==c?void 0:c.slug)?a:"Unknown"}})},bgColor:"bg-alternative border",...e,icon:(0,s.jsx)(q.ty,{className:(0,k.cn)("fill-foreground","w-4 h-4"),strokeWidth:1.5})},"action-card-".concat(a)))}),(0,s.jsx)("div",{className:"flex justify-center mt-5",children:(0,s.jsx)(C.$,{asChild:!0,type:"default",children:(0,s.jsx)(d(),{href:"/project/".concat(t,"/sql/quickstarts"),children:"View more templates"})})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2313,4335,9441,7494,4280,7598,4915,4560,6797,4674,2360,6110,6712,7795,4968,876,5089,9239,1895,3709,5573,9897,6585,279,6692,7460,4856,9839,7686,8343,2690,6232,597,8119,1533,8742,1444,5957,8221,4034,835,5153,8968,636,6593,8792],()=>t(24566)),_N_E=e.O()}]);